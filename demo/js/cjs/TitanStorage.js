/*! For license information please see TitanStorage.js.LICENSE.txt */
(()=>{var __webpack_modules__={45:t=>{"use strict";t.exports=function(t,e){var r=new Array(arguments.length-1),n=0,o=2,i=!0;for(;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(t){if(i)if(i=!1,t)a(t);else{for(var e=new Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];o.apply(null,e)}};try{t.apply(e||null,r)}catch(t){i&&(i=!1,a(t))}}))}},839:(t,e)=>{"use strict";var r=e;r.length=function(t){var e=t.length;if(!e)return 0;for(var r=0;--e%4>1&&"="===t.charAt(e);)++r;return Math.ceil(3*t.length)/4-r};for(var n=new Array(64),o=new Array(123),i=0;i<64;)o[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(t,e,r){for(var o,i=null,a=[],s=0,u=0;e<r;){var c=t[e++];switch(u){case 0:a[s++]=n[c>>2],o=(3&c)<<4,u=1;break;case 1:a[s++]=n[o|c>>4],o=(15&c)<<2,u=2;break;case 2:a[s++]=n[o|c>>6],a[s++]=n[63&c],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=n[o],a[s++]=61,1===u&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var a="invalid encoding";r.decode=function(t,e,r){for(var n,i=r,s=0,u=0;u<t.length;){var c=t.charCodeAt(u++);if(61===c&&s>1)break;if(void 0===(c=o[c]))throw Error(a);switch(s){case 0:n=c,s=1;break;case 1:e[r++]=n<<2|(48&c)>>4,n=c,s=2;break;case 2:e[r++]=(15&n)<<4|(60&c)>>2,n=c,s=3;break;case 3:e[r++]=(3&n)<<6|c,s=0}}if(1===s)throw Error(a);return r-i},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},358:t=>{"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:r||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var r=this._listeners[t],n=0;n<r.length;)r[n].fn===e?r.splice(n,1):++n;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,r)}return this}},410:t=>{"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=128===r[3];function o(t,n,o){e[0]=t,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(t,n,o){e[0]=t,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],e[0]}function s(t,n){return r[3]=t[n],r[2]=t[n+1],r[1]=t[n+2],r[0]=t[n+3],e[0]}t.writeFloatLE=n?o:i,t.writeFloatBE=n?i:o,t.readFloatLE=n?a:s,t.readFloatBE=n?s:a}():function(){function e(t,e,r,n){var o=e<0?1:0;if(o&&(e=-e),0===e)t(1/e>0?0:2147483648,r,n);else if(isNaN(e))t(2143289344,r,n);else if(e>34028234663852886e22)t((o<<31|2139095040)>>>0,r,n);else if(e<11754943508222875e-54)t((o<<31|Math.round(e/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(e)/Math.LN2);t((o<<31|i+127<<23|8388607&Math.round(e*Math.pow(2,-i)*8388608))>>>0,r,n)}}function a(t,e,r){var n=t(e,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}t.writeFloatLE=e.bind(null,r),t.writeFloatBE=e.bind(null,n),t.readFloatLE=a.bind(null,o),t.readFloatBE=a.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=128===r[7];function o(t,n,o){e[0]=t,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(t,n,o){e[0]=t,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],r[4]=t[n+4],r[5]=t[n+5],r[6]=t[n+6],r[7]=t[n+7],e[0]}function s(t,n){return r[7]=t[n],r[6]=t[n+1],r[5]=t[n+2],r[4]=t[n+3],r[3]=t[n+4],r[2]=t[n+5],r[1]=t[n+6],r[0]=t[n+7],e[0]}t.writeDoubleLE=n?o:i,t.writeDoubleBE=n?i:o,t.readDoubleLE=n?a:s,t.readDoubleBE=n?s:a}():function(){function e(t,e,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)t(0,o,i+e),t(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))t(0,o,i+e),t(2146959360,o,i+r);else if(n>17976931348623157e292)t(0,o,i+e),t((a<<31|2146435072)>>>0,o,i+r);else{var s;if(n<22250738585072014e-324)t((s=n/5e-324)>>>0,o,i+e),t((a<<31|s/4294967296)>>>0,o,i+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(s=n*Math.pow(2,-u))>>>0,o,i+e),t((a<<31|u+1023<<20|1048576*s&1048575)>>>0,o,i+r)}}}function a(t,e,r,n,o){var i=t(n,o+e),a=t(n,o+r),s=2*(a>>31)+1,u=a>>>20&2047,c=4294967296*(1048575&a)+i;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,r,0,4),t.writeDoubleBE=e.bind(null,n,4,0),t.readDoubleLE=a.bind(null,o,0,4),t.readDoubleBE=a.bind(null,i,4,0)}(),t}function r(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function n(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function i(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},153:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},390:t=>{"use strict";t.exports=function(t,e,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return t(r);a+r>n&&(i=t(n),a=0);var s=e.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}},447:(t,e)=>{"use strict";var r=e;r.length=function(t){for(var e=0,r=0,n=0;n<t.length;++n)(r=t.charCodeAt(n))<128?e+=1:r<2048?e+=2:55296==(64512&r)&&56320==(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},r.read=function(t,e,r){if(r-e<1)return"";for(var n,o=null,i=[],a=0;e<r;)(n=t[e++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},r.write=function(t,e,r){for(var n,o,i=r,a=0;a<t.length;++a)(n=t.charCodeAt(a))<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=t.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128);return r-i}},232:(t,e,r)=>{var n,o,i;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}i=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(t,e){var r=t[0],n=t[1],o=t[2],i=t[3];n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+e[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&o)+e[1]-389564586|0)<<12|i>>>20)+r|0)&r|~i&n)+e[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&r)+e[3]-1044525330|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+e[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&o)+e[5]+1200080426|0)<<12|i>>>20)+r|0)&r|~i&n)+e[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&r)+e[7]-45705983|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+e[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&o)+e[9]-1958414417|0)<<12|i>>>20)+r|0)&r|~i&n)+e[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&r)+e[11]-1990404162|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+e[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&o)+e[13]-40341101|0)<<12|i>>>20)+r|0)&r|~i&n)+e[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&r)+e[15]+1236535329|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+e[1]-165796510|0)<<5|r>>>27)+n|0)&o|n&~o)+e[6]-1069501632|0)<<9|i>>>23)+r|0)&n|r&~n)+e[11]+643717713|0)<<14|o>>>18)+i|0)&r|i&~r)+e[0]-373897302|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+e[5]-701558691|0)<<5|r>>>27)+n|0)&o|n&~o)+e[10]+38016083|0)<<9|i>>>23)+r|0)&n|r&~n)+e[15]-660478335|0)<<14|o>>>18)+i|0)&r|i&~r)+e[4]-405537848|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+e[9]+568446438|0)<<5|r>>>27)+n|0)&o|n&~o)+e[14]-1019803690|0)<<9|i>>>23)+r|0)&n|r&~n)+e[3]-187363961|0)<<14|o>>>18)+i|0)&r|i&~r)+e[8]+1163531501|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+e[13]-1444681467|0)<<5|r>>>27)+n|0)&o|n&~o)+e[2]-51403784|0)<<9|i>>>23)+r|0)&n|r&~n)+e[7]+1735328473|0)<<14|o>>>18)+i|0)&r|i&~r)+e[12]-1926607734|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+e[5]-378558|0)<<4|r>>>28)+n|0)^n^o)+e[8]-2022574463|0)<<11|i>>>21)+r|0)^r^n)+e[11]+1839030562|0)<<16|o>>>16)+i|0)^i^r)+e[14]-35309556|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+e[1]-1530992060|0)<<4|r>>>28)+n|0)^n^o)+e[4]+1272893353|0)<<11|i>>>21)+r|0)^r^n)+e[7]-155497632|0)<<16|o>>>16)+i|0)^i^r)+e[10]-1094730640|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+e[13]+681279174|0)<<4|r>>>28)+n|0)^n^o)+e[0]-358537222|0)<<11|i>>>21)+r|0)^r^n)+e[3]-722521979|0)<<16|o>>>16)+i|0)^i^r)+e[6]+76029189|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+e[9]-640364487|0)<<4|r>>>28)+n|0)^n^o)+e[12]-421815835|0)<<11|i>>>21)+r|0)^r^n)+e[15]+530742520|0)<<16|o>>>16)+i|0)^i^r)+e[2]-995338651|0)<<23|n>>>9)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+e[0]-198630844|0)<<6|r>>>26)+n|0)|~o))+e[7]+1126891415|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+e[14]-1416354905|0)<<15|o>>>17)+i|0)|~r))+e[5]-57434055|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+e[12]+1700485571|0)<<6|r>>>26)+n|0)|~o))+e[3]-1894986606|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+e[10]-1051523|0)<<15|o>>>17)+i|0)|~r))+e[1]-2054922799|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+e[8]+1873313359|0)<<6|r>>>26)+n|0)|~o))+e[15]-30611744|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+e[6]-1560198380|0)<<15|o>>>17)+i|0)|~r))+e[13]+1309151649|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+e[4]-145523070|0)<<6|r>>>26)+n|0)|~o))+e[11]-1120210379|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+e[2]+718787259|0)<<15|o>>>17)+i|0)|~r))+e[9]-343485551|0)<<21|n>>>11)+o|0,t[0]=r+t[0]|0,t[1]=n+t[1]|0,t[2]=o+t[2]|0,t[3]=i+t[3]|0}function n(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}function o(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return r}function i(t){var e,o,i,a,s,u,c=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)r(l,n(t.substring(e-64,e)));for(o=(t=t.substring(e-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<o;e+=1)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(r(l,i),e=0;e<16;e+=1)i[e]=0;return a=(a=8*c).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,i[14]=s,i[15]=u,r(l,i),l}function a(t){var r,n="";for(r=0;r<4;r+=1)n+=e[t>>8*r+4&15]+e[t>>8*r&15];return n}function s(t){var e;for(e=0;e<t.length;e+=1)t[e]=a(t[e]);return t.join("")}function u(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function c(t){var e,r=[],n=t.length;for(e=0;e<n-1;e+=2)r.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,r)}function l(){this.reset()}return s(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(r,n){var o,i,a,s,u=this.byteLength,c=e(r,u),l=u;return n!==t&&(l=e(n,u)),c>l?new ArrayBuffer(0):(o=l-c,i=new ArrayBuffer(o),a=new Uint8Array(i),s=new Uint8Array(this,c,o),a.set(s),i)}}(),l.prototype.append=function(t){return this.appendBinary(u(t)),this},l.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,o=this._buff.length;for(e=64;e<=o;e+=64)r(this._hash,n(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},l.prototype.end=function(t){var e,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);return this._finish(i,o),r=s(this._hash),t&&(r=c(r)),this.reset(),r},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(t,e){var n,o,i,a=e;if(t[a>>2]|=128<<(a%4<<3),a>55)for(r(this._hash,t),a=0;a<16;a+=1)t[a]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(n[2],16),i=parseInt(n[1],16)||0,t[14]=o,t[15]=i,r(this._hash,t)},l.hash=function(t,e){return l.hashBinary(u(t),e)},l.hashBinary=function(t,e){var r=s(i(t));return e?c(r):r},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(t){var e,n,i,a,s,u=(n=this._buff.buffer,i=t,a=!0,(s=new Uint8Array(n.byteLength+i.byteLength)).set(new Uint8Array(n)),s.set(new Uint8Array(i),n.byteLength),a?s:s.buffer),c=u.length;for(this._length+=t.byteLength,e=64;e<=c;e+=64)r(this._hash,o(u.subarray(e-64,e)));return this._buff=e-64<c?new Uint8Array(u.buffer.slice(e-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(t){var e,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=n[e]<<(e%4<<3);return this._finish(i,o),r=s(this._hash),t&&(r=c(r)),this.reset(),r},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var t,e=l.prototype.getState.call(this);return e.buff=(t=e.buff,String.fromCharCode.apply(null,new Uint8Array(t))),e},l.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,e){var r,n=t.length,o=new ArrayBuffer(n),i=new Uint8Array(o);for(r=0;r<n;r+=1)i[r]=t.charCodeAt(r);return e?i:o}(t.buff,!0),l.prototype.setState.call(this,t)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(t,e){var n=s(function(t){var e,n,i,a,s,u,c=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)r(l,o(t.subarray(e-64,e)));for(n=(t=e-64<c?t.subarray(e-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)i[e>>2]|=t[e]<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(r(l,i),e=0;e<16;e+=1)i[e]=0;return a=(a=8*c).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,i[14]=s,i[15]=u,r(l,i),l}(new Uint8Array(t)));return e?c(n):n},l},"object"===a(e)?t.exports=i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},437:(t,e,r)=>{t.exports=r(327)},327:function(t,e){!function(r,n){"use strict";var o={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function i(t){if(!Array.isArray(t)&&!ArrayBuffer.isView(t))return!1;for(var e=0;e<t.length;e++)if(!Number.isInteger(t[e])||t[e]<0||t[e]>255)return!1;return!0}function a(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function s(t,e){return t<<e|t>>>32-e}function u(t){return t=a(t^=t>>>16,2246822507),t=a(t^=t>>>13,3266489909),t^=t>>>16}function c(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var r=[0,0,0,0];return r[3]+=t[3]+e[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=t[2]+e[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=t[1]+e[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=t[0]+e[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var r=[0,0,0,0];return r[3]+=t[3]*e[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=t[2]*e[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=t[3]*e[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=t[1]*e[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=t[2]*e[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=t[3]*e[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function f(t,e){return 32===(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function h(t,e){return 0===(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function p(t,e){return[t[0]^e[0],t[1]^e[1]]}function d(t){return t=p(t,[0,t[0]>>>1]),t=p(t=l(t,[4283543511,3981806797]),[0,t[0]>>>1]),t=p(t=l(t,[3301882366,444984403]),[0,t[0]>>>1])}o.x86.hash32=function(t,e){if(o.inputValidation&&!i(t))return n;e=e||0;for(var r=t.length%4,c=t.length-r,l=e,f=0,h=3432918353,p=461845907,d=0;d<c;d+=4)f=a(f=t[d]|t[d+1]<<8|t[d+2]<<16|t[d+3]<<24,h),f=a(f=s(f,15),p),l=a(l=s(l^=f,13),5)+3864292196;switch(f=0,r){case 3:f^=t[d+2]<<16;case 2:f^=t[d+1]<<8;case 1:f=a(f^=t[d],h),l^=f=a(f=s(f,15),p)}return(l=u(l^=t.length))>>>0},o.x86.hash128=function(t,e){if(o.inputValidation&&!i(t))return n;e=e||0;for(var r=t.length%16,c=t.length-r,l=e,f=e,h=e,p=e,d=0,y=0,g=0,v=0,b=597399067,m=2869860233,w=951274213,k=2716044179,E=0;E<c;E+=16)d=t[E]|t[E+1]<<8|t[E+2]<<16|t[E+3]<<24,y=t[E+4]|t[E+5]<<8|t[E+6]<<16|t[E+7]<<24,g=t[E+8]|t[E+9]<<8|t[E+10]<<16|t[E+11]<<24,v=t[E+12]|t[E+13]<<8|t[E+14]<<16|t[E+15]<<24,d=s(d=a(d,b),15),l=s(l^=d=a(d,m),19),l=a(l+=f,5)+1444728091,y=s(y=a(y,m),16),f=s(f^=y=a(y,w),17),f=a(f+=h,5)+197830471,g=s(g=a(g,w),17),h=s(h^=g=a(g,k),15),h=a(h+=p,5)+2530024501,v=s(v=a(v,k),18),p=s(p^=v=a(v,b),13),p=a(p+=l,5)+850148119;switch(d=0,y=0,g=0,v=0,r){case 15:v^=t[E+14]<<16;case 14:v^=t[E+13]<<8;case 13:v=a(v^=t[E+12],k),p^=v=a(v=s(v,18),b);case 12:g^=t[E+11]<<24;case 11:g^=t[E+10]<<16;case 10:g^=t[E+9]<<8;case 9:g=a(g^=t[E+8],w),h^=g=a(g=s(g,17),k);case 8:y^=t[E+7]<<24;case 7:y^=t[E+6]<<16;case 6:y^=t[E+5]<<8;case 5:y=a(y^=t[E+4],m),f^=y=a(y=s(y,16),w);case 4:d^=t[E+3]<<24;case 3:d^=t[E+2]<<16;case 2:d^=t[E+1]<<8;case 1:d=a(d^=t[E],b),l^=d=a(d=s(d,15),m)}return l^=t.length,l+=f^=t.length,l+=h^=t.length,f+=l+=p^=t.length,h+=l,p+=l,l=u(l),l+=f=u(f),l+=h=u(h),f+=l+=p=u(p),h+=l,p+=l,("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)},o.x64.hash128=function(t,e){if(o.inputValidation&&!i(t))return n;e=e||0;for(var r=t.length%16,a=t.length-r,s=[0,e],u=[0,e],y=[0,0],g=[0,0],v=[2277735313,289559509],b=[1291169091,658871167],m=0;m<a;m+=16)y=[t[m+4]|t[m+5]<<8|t[m+6]<<16|t[m+7]<<24,t[m]|t[m+1]<<8|t[m+2]<<16|t[m+3]<<24],g=[t[m+12]|t[m+13]<<8|t[m+14]<<16|t[m+15]<<24,t[m+8]|t[m+9]<<8|t[m+10]<<16|t[m+11]<<24],y=f(y=l(y,v),31),s=c(s=f(s=p(s,y=l(y,b)),27),u),s=c(l(s,[0,5]),[0,1390208809]),g=f(g=l(g,b),33),u=c(u=f(u=p(u,g=l(g,v)),31),s),u=c(l(u,[0,5]),[0,944331445]);switch(y=[0,0],g=[0,0],r){case 15:g=p(g,h([0,t[m+14]],48));case 14:g=p(g,h([0,t[m+13]],40));case 13:g=p(g,h([0,t[m+12]],32));case 12:g=p(g,h([0,t[m+11]],24));case 11:g=p(g,h([0,t[m+10]],16));case 10:g=p(g,h([0,t[m+9]],8));case 9:g=l(g=p(g,[0,t[m+8]]),b),u=p(u,g=l(g=f(g,33),v));case 8:y=p(y,h([0,t[m+7]],56));case 7:y=p(y,h([0,t[m+6]],48));case 6:y=p(y,h([0,t[m+5]],40));case 5:y=p(y,h([0,t[m+4]],32));case 4:y=p(y,h([0,t[m+3]],24));case 3:y=p(y,h([0,t[m+2]],16));case 2:y=p(y,h([0,t[m+1]],8));case 1:y=l(y=p(y,[0,t[m]]),v),s=p(s,y=l(y=f(y,31),b))}return s=c(s=p(s,[0,t.length]),u=p(u,[0,t.length])),u=c(u,s),s=c(s=d(s),u=d(u)),u=c(u,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=o),e.murmurHash3=o}()},946:(t,e,r)=>{"use strict";t.exports=r(394)},394:(t,e,r)=>{"use strict";var n=e;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(449),n.BufferWriter=r(818),n.Reader=r(237),n.BufferReader=r(158),n.util=r(610),n.rpc=r(47),n.roots=r(529),n.configure=o,o()},237:(t,e,r)=>{"use strict";t.exports=u;var n,o=r(610),i=o.LongBits,a=o.utf8;function s(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function u(t){this.buf=t,this.pos=0,this.len=t.length}var c,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new u(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new u(t);throw Error("illegal buffer")},f=function(){return o.Buffer?function(t){return(u.create=function(t){return o.Buffer.isBuffer(t)?new n(t):l(t)})(t)}:l};function h(){var t=new i(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw s(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw s(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw s(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}u.create=f(),u.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|p(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var t=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var t=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},u.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw s(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(e,r);if(e===r){var n=o.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,e,r)},u.prototype.string=function(){var t=this.bytes();return a.read(t,0,t.length)},u.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw s(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},u._configure=function(t){n=t,u.create=f(),n._configure();var e=o.Long?"toLong":"toNumber";o.merge(u.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return d.call(this)[e](!0)},sfixed64:function(){return d.call(this)[e](!1)}})}},158:(t,e,r)=>{"use strict";t.exports=i;var n=r(237);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(610);function i(t){n.call(this,t)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},i._configure()},529:t=>{"use strict";t.exports={}},47:(t,e,r)=>{"use strict";e.Service=r(595)},595:(t,e,r)=>{"use strict";t.exports=o;var n=r(610);function o(t,e,r){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function t(e,r,o,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return n.asPromise(t,s,e,r,o,i);if(s.rpcImpl)try{return s.rpcImpl(e,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(t,r){if(t)return s.emit("error",t,e),a(t);if(null!==r){if(!(r instanceof o))try{r=o[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return s.emit("error",t,e),a(t)}return s.emit("data",r,e),a(null,r)}s.end(!0)}))}catch(t){return s.emit("error",t,e),void setTimeout((function(){a(t)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},o.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},239:(t,e,r)=>{"use strict";t.exports=o;var n=r(610);function o(t,e){this.lo=t>>>0,this.hi=e>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(t){if(0===t)return i;var e=t<0;e&&(t=-t);var r=t>>>0,n=(t-r)/4294967296>>>0;return e&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(t){if("number"==typeof t)return o.fromNumber(t);if(n.isString(t)){if(!n.Long)return o.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new o(t.low>>>0,t.high>>>0):i},o.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var s=String.prototype.charCodeAt;o.fromHash=function(t){return t===a?i:new o((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},o.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},o.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}},610:function(t,e,r){"use strict";var n=e;function o(t,e,r){for(var n=Object.keys(e),o=0;o<n.length;++o)void 0!==t[n[o]]&&r||(t[n[o]]=e[n[o]]);return t}function i(t){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&o(this,r)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}n.asPromise=r(45),n.base64=r(839),n.EventEmitter=r(358),n.float=r(410),n.inquire=r(153),n.utf8=r(447),n.pool=r(390),n.LongBits=r(239),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var r=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},n.merge=o,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},n.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},449:(t,e,r)=>{"use strict";t.exports=f;var n,o=r(610),i=o.LongBits,a=o.base64,s=o.utf8;function u(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var h=function(){return o.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}};function p(t,e,r){e[r]=255&t}function d(t,e){this.len=t,this.next=void 0,this.val=e}function y(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function g(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}f.create=h(),f.alloc=function(t){return new o.Array(t)},o.Array!==Array&&(f.alloc=o.pool(f.alloc,o.Array.prototype.subarray)),f.prototype._push=function(t,e,r){return this.tail=this.tail.next=new u(t,e,r),this.len+=e,this},d.prototype=Object.create(u.prototype),d.prototype.fn=function(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t},f.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new d((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},f.prototype.int32=function(t){return t<0?this._push(y,10,i.fromNumber(t)):this.uint32(t)},f.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},f.prototype.uint64=function(t){var e=i.from(t);return this._push(y,e.length(),e)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(t){var e=i.from(t).zzEncode();return this._push(y,e.length(),e)},f.prototype.bool=function(t){return this._push(p,1,t?1:0)},f.prototype.fixed32=function(t){return this._push(g,4,t>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(t){var e=i.from(t);return this._push(g,4,e.lo)._push(g,4,e.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(t){return this._push(o.float.writeFloatLE,4,t)},f.prototype.double=function(t){return this._push(o.float.writeDoubleLE,8,t)};var v=o.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};f.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(p,1,0);if(o.isString(t)){var r=f.alloc(e=a.length(t));a.decode(t,r,0),t=r}return this.uint32(e)._push(v,e,t)},f.prototype.string=function(t){var e=s.length(t);return e?this.uint32(e)._push(s.write,e,t):this._push(p,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},f.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},f._configure=function(t){n=t,f.create=h(),n._configure()}},818:(t,e,r)=>{"use strict";t.exports=i;var n=r(449);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(610);function i(){n.call(this)}function a(t,e,r){t.length<40?o.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]}},i.prototype.bytes=function(t){o.isString(t)&&(t=o._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(i.writeBytesBuffer,e,t),this},i.prototype.string=function(t){var e=o.Buffer.byteLength(t);return this.uint32(e),e&&this._push(a,e,t),this},i._configure()},797:t=>{t.exports=function t(n,o){var i,a=0,s=0,u=o=o||0,c=n.length;do{if(u>=c||s>49)throw t.bytes=0,new RangeError("Could not decode varint");i=n[u++],a+=s<28?(i&r)<<s:(i&r)*Math.pow(2,s),s+=7}while(i>=e);return t.bytes=u-o,a};var e=128,r=127},877:t=>{t.exports=function t(o,i,a){if(Number.MAX_SAFE_INTEGER&&o>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");i=i||[];var s=a=a||0;for(;o>=n;)i[a++]=255&o|e,o/=128;for(;o&r;)i[a++]=255&o|e,o>>>=7;return i[a]=0|o,t.bytes=a-s+1,i};var e=128,r=-128,n=Math.pow(2,31)},203:(t,e,r)=>{t.exports={encode:r(877),decode:r(797),encodingLength:r(867)}},867:t=>{var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),o=Math.pow(2,28),i=Math.pow(2,35),a=Math.pow(2,42),s=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<o?4:t<i?5:t<a?6:t<s?7:t<u?8:t<c?9:10}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>Fu});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{DEFAULT_DIRECTORY_MODE:()=>Oe,DEFAULT_FILE_MODE:()=>Le,NodeType:()=>Ee,code:()=>Ae,createAdvancedFile:()=>Ne,createComplexFile:()=>Fe,createDirectoryShard:()=>Be,createEmptyFile:()=>je,createFileChunk:()=>Pe,createFileShard:()=>ze,createFlatDirectory:()=>Ce,createRaw:()=>Re,createShardedDirectory:()=>Ue,createSimpleFile:()=>De,createSymlink:()=>Xe,cumulativeContentByteLength:()=>ar,cumulativeDagByteLength:()=>sr,decode:()=>rr,decodeMetadata:()=>hr,encode:()=>er,encodeAdvancedFile:()=>qe,encodeComplexFile:()=>We,encodeDirectory:()=>Ke,encodeDirectoryMetadata:()=>lr,encodeFile:()=>Ge,encodeFileChunk:()=>He,encodeFileShard:()=>$e,encodeHAMTShard:()=>Je,encodeLink:()=>Ve,encodeMetadata:()=>fr,encodeMode:()=>dr,encodeRaw:()=>Me,encodeSimpleFile:()=>Ye,encodeSymlink:()=>tr,filesize:()=>wr,matchFile:()=>gr,name:()=>Ie});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{context:()=>Pn,cut:()=>Fn,name:()=>Dn,type:()=>Nn,withMaxChunkSize:()=>zn});var r={};__webpack_require__.r(r);var n={};__webpack_require__.r(n),__webpack_require__.d(n,{API:()=>r,and:()=>bo,bitCount:()=>vo,empty:()=>co,from:()=>lo,fromBytes:()=>ko,get:()=>go,or:()=>mo,popcount:()=>ho,set:()=>po,size:()=>fo,toBytes:()=>wo,unset:()=>yo});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{configure:()=>So,hash32:()=>_o});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{API:()=>r,and:()=>ki,empty:()=>ci,from:()=>li,fromBytes:()=>bi,get:()=>gi,or:()=>wi,popcount:()=>mi,set:()=>di,size:()=>fi,toBytes:()=>vi,unset:()=>yi});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{code:()=>Ki,decode:()=>Qi,encode:()=>Ji,name:()=>Wi});const s={SUCCESSFULLY:0,FAILURE:-1,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,INTERNAL_SERVER_ERROR:-1,SERVICE_UNAVAILABLE:503,InitSdk_ERROR:1001,API_KEY_EMPTY:1002,INVALID_API_KEY:1003,RESOURCE_NOT_AVAILABLE:1004,FILE_NAME_KEY_EMPTY:1005,ID_KEY_EMPTY:1006,PARENT_ID_ERROR:1004,SHARE_ERROE:1007,ASSEST_OBJ_ERROR:1008,INVALID_PASSWORD:1009,FETCH_ERROR:10010,PARENT_ID_INVALID:10011,PAGE_ERROR:10012,PAGESIZE_ERROR:10013,MISSING_FIELDS_ERROR:10014,UPLOAD_FILE_ERROR:10015,AREA_ID_ERROR:10016,Group_ID_ERROR:10017,Asset_Type_ERROR:10018,Dowload_URL_ERROR:10019,Dowload_ERROR:10020,ASSEST_ID_ERROR:10021,Dowload_Type_ERROR:10022,REPORT_ERROR:10023,INVALID_EXPIRE_AT:10024,ASSET_OBJ_ERROR:10025,REQUEST_ERROR:10026,File_Size_ERROR:10027,File_REQUEST_ABOR:10028};function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};JSON.parse(localStorage.getItem("titanOptions")).debug&&(Object.keys(e).length>0?console.log(t,e):console.log(t))}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.code,r=t.msg,n=void 0===r?"":r,o=t.data,i=void 0===o?{}:o,a={code:e,msg:n};return n||(a=function(t,e){var r;switch(t){case s.InitSdk_OK:r="Initialize SDK Success";break;case s.BAD_REQUEST:r="The request was invalid. Please check your input.";break;case s.UNAUTHORIZED:r="You are not authorized. Please check your credentials.";break;case s.FORBIDDEN:r="You do not have permission to access this resource.";break;case s.NOT_FOUND:r="The requested resource could not be found.";break;case s.INTERNAL_SERVER_ERROR:r="An error occurred on the server. Please try again later.";break;case s.SERVICE_UNAVAILABLE:r="The service is currently unavailable. Please try again later.";break;case s.API_KEY_EMPTY:r="API toekn is required and cannot be empty.";break;case s.INVALID_API_KEY:r="The provided API Key is invalid.";break;case s.RESOURCE_NOT_AVAILABLE:r="The requested resource is not available.";break;case s.ID_KEY_EMPTY:r="ID is required but was not provided.";break;case s.ASSET_OBJ_ERROR:r="Invalid options provided.";break;case s.REQUEST_ERROR:r="Failed to retrieve asset group information.";break;case s.FILE_NAME_KEY_EMPTY:r="Name is required but was not provided.";break;case s.PARENT_ID_ERROR:r="Parent ID is required but was incorrect.";break;case s.SHARE_ERROE:r="The file cannot be shared.";break;case s.ASSEST_OBJ_ERROR:r="assetDetail must be an object.";break;case s.PARENT_ID_INVALID:r="Invalid 'parent' parameter. It should be a non-negative number.";break;case s.PAGE_ERROR:r="Invalid 'page' parameter. It should be a positive number.";break;case s.PAGESIZE_ERROR:r="Invalid 'pageSize' parameter. It should be a non-negative number.";break;case s.MISSING_FIELDS_ERROR:r="Missing required fields in assetDetail";break;case s.INVALID_PASSWORD:r="Invalid shortPass format. It should be a 6-character alphanumeric string.";break;case s.AREA_ID_ERROR:r="area_id should be an array.";break;case s.Group_ID_ERROR:r="group_id should be a non-negative integer.";break;case s.Asset_Type_ERROR:r="asset_type should be 0 or 1.";break;case s.Sdk_OK:r="TitanSDK initialized successfully";break;case s.InitSdk_ERROR:r="Failed to initialize TitanSDK";break;case s.Dowload_URL_ERROR:r="No available download address";break;case s.Dowload_Type_ERROR:r="Download type not found";break;case s.SUCCESSFULLY:r="Success";break;case s.FAILURE:r="Failure";break;default:r="An unknown error occurred."}return{code:t,msg:e||r}}(e,n)),{code:a.code,msg:a.msg,data:i||{}}}var l=["code","msg","data"],f=["code","msg","data"];function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return(e=b(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function b(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(e)?e:e+""}var m=function(){return t=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.token=e,this.url=r,this.debug=n,this.url||(this.url="https://api-test1.container1.titannet.io"),e&&""!==e.trim()||u(s.API_KEY_EMPTY,"")},e=[{key:"checkLanguage",value:function(){var t=navigator.language||navigator.userLanguage,e=localStorage.getItem("ttStorageLanguage");return e||(t.includes("zh")?"cn":t.includes("en")?"en":"")}},{key:"updateToken",value:function(t){return t&&""!==t.trim()?(this.token=t,c({code:s.SUCCESSFULLY})):c({code:s.FAILURE})}},{key:"updateLanguage",value:function(t){return t&&""!==t.trim()?(localStorage.setItem("ttStorageLanguage",t),c({code:s.SUCCESSFULLY})):c({code:s.FAILURE})}},{key:"getData",value:function(t){var e="".concat(this.url).concat(t);if(!this.token||""===this.token.trim())return c({code:s.API_KEY_EMPTY});u("Fetching data from URL:",e);var r={"Content-Type":"application/json",lang:this.checkLanguage()};return"token"!=this.token&&(r.JwtAuthorization="Bearer "+this.token),fetch(e,{method:"GET",headers:r}).then((function(t){return t.ok?t.json():t.text().then((function(e){return c({code:t.status,msg:null!=e?e:""})}))})).then((function(t){u("fetched successfully:",t);var e=t.code,r=t.msg,n=t.data,o=g(t,l);return c({code:e,msg:null!=r?r:"",data:d(d({},n),o)})})).catch((function(t){return c({code:s.FETCH_ERROR,msg:t})}))}},{key:"postData",value:function(t,e){var r="".concat(this.url).concat(t);if(!this.token||""===this.token.trim())return c({code:s.API_KEY_EMPTY});u("Posting data to URL:",r);var n={"Content-Type":"application/json",lang:this.checkLanguage()};return"token"!=this.token&&(n.JwtAuthorization="Bearer "+this.token),fetch(r,{method:"POST",headers:n,body:JSON.stringify(e)}).then((function(t){return t.ok?t.json():t.text().then((function(e){var r="Error ".concat(t.status,": ").concat(e),n=c({code:t.status,msg:r});return Promise.reject(n)}))})).then((function(t){u("Data posted successfully:",t);var e=t.code,r=t.msg,n=t.data,o=g(t,f);return c({code:e,msg:null!=r?r:"",data:d(d({},Array.isArray(n)?{List:n}:n),o)})})).catch((function(t){return u("Data posted error:",t),c({code:s.FETCH_ERROR,msg:t})}))}},{key:"uploadFile",value:function(t,e,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return new Promise((function(l,f){var h=new XMLHttpRequest,p="".concat(t);if(!n.token||""===n.token.trim())return c({code:s.API_KEY_EMPTY});var d=0;h.open("POST",p,!0),h.setRequestHeader("JwtAuthorization","Bearer "+n.token),h.setRequestHeader("Authorization","Bearer "+e),h.upload.onprogress=function(t){if(t.lengthComputable&&i){d=t.total;var e=t.loaded/t.total*100;i(t.loaded,t.total,e)}},h.onload=function(){if(h.status>=200&&h.status<300){var t=JSON.parse(h.responseText);u("File uploaded successfully:",t),i&&i(d,d,100),l(t)}else u("File uploaded:",h.status),f(c({code:h.status,msg:h.responseText}))},h.onerror=function(){var t="File upload failed: ".concat(h.statusText||"Handle network errors");f(c({code:s.FETCH_ERROR,msg:t}))},a.addEventListener("abort",(function(){h.abort(),f(c({code:-200,msg:"Handle request abortion",data:{abort:!0}}))}));var y=new FormData;for(var g in y.append("file",r),o)o.hasOwnProperty(g)&&y.append(g,o[g]);h.send(y)}))}}],e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),w={validateApiKey:function(t){if(!t||""===t.trim())return c({code:s.API_KEY_EMPTY})},validateGroupName:function(t){if(!t||""===t.trim())return c({code:s.FILE_NAME_KEY_EMPTY,msg:"Group name cannot be empty."})},validateAssetCid:function(t){if(!t||""===t.trim())return c({code:s.ASSEST_ID_ERROR,msg:"AssetCid cannot be empty."})},validateAssetId:function(t){if(!t||""===t.trim())return c({code:s.ASSEST_ID_ERROR,msg:"Asset ID is required."})},validateAreaId:function(t){if(!Array.isArray(t))return c({code:s.AREA_ID_ERROR,msg:"Asset_ID should be an array."})},validateGroupId:function(t){if(!Number.isInteger(t))return c({code:s.Group_ID_ERROR,msg:"group_id should be a non-negative intege."})},validateAssetType:function(t){if(0!==t&&1!==t)return c({code:s.Asset_Type_ERROR,msg:"asset_type should be 0 or 1."})},validateAssetFile:function(t){if(t>104857600)return c({code:s.File_Size_ERROR,msg:"file size should not exceed 100MB."})},validateParentId:function(t){if("number"!=typeof t||t<0)return c({code:s.PARENT_ID_INVALID,msg:"Parent ID is invalid."})},validatePage:function(t){if("number"!=typeof t||t<=0)return c({code:s.PAGE_ERROR,msg:"Page number is invalid."})},validatePageSize:function(t){if("number"!=typeof t||t<=0)return c({code:s.PAGESIZE_ERROR,msg:"Page size is invalid."})},validateShortPass:function(t){if(t){if(!/^[a-zA-Z0-9]{6}$/.test(t))return c({code:s.INVALID_PASSWORD,msg:"hort password is invalid. It must be 6 characters long and can only contain letters and numbers."})}},validateExpireAt:function(t){if(t&&!(Number.isInteger(t)&&t>0))return c({code:s.INVALID_EXPIRE_AT,msg:"expireAt must be a positive integer"})},validateShareStatus:function(t){if(![0,1].includes(t))return c({code:s.SHARE_ERROE,msg:"Share status is invalid"})},validateUploadOptions:function(t,e,r,n){var o=[{fn:w.validateAreaId,value:e},{fn:w.validateGroupId,value:r},{fn:w.validateAssetType,value:n}];if(t.size<=0)return c({code:s.File_Size_ERROR,msg:"File size must be greater than 0"});if(-1===r&&w.validateAssetFile(t.size))return w.validateAssetFile(t.size);for(var i=0,a=o;i<a.length;i++){var u=a[i],l=(0,u.fn)(u.value);if(l)return l}return null}};function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){return(e=I(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S(){S=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:A(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",g={};function v(){}function b(){}function m(){}var w={};c(w,a,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(D([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=m.prototype=v.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==k(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function A(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=I(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function I(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function D(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(k(e)+" is not iterable")}return b.prototype=m,o(_,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:b,configurable:!0}),b.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},L(O.prototype),c(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function L(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function O(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){L(i,n,o,a,s,"next",t)}function s(t){L(i,n,o,a,s,"throw",t)}a(void 0)}))}}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I(n.key),n)}}function I(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k(e)?e:e+""}var T=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Http=e},e=[{key:"getFileUploadURL",value:(w=O(S().mark((function t(e){var r,n,o,i,a,s;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.isLoggedIn,n=e.assetData,o=e.areaIds,!r){t.next=9;break}return i="/api/v1/storage/get_upload_info?t="+(new Date).getTime()+"&need_trace=true&md5="+n,o&&o.length>0&&(a=o.map((function(t){return"area_id=".concat(encodeURIComponent(t))})).join("&"),i+="&".concat(a)),t.next=6,this.Http.getData(i);case 6:case 13:return t.abrupt("return",t.sent);case 9:return i="/api/v1/storage/temp_file/get_upload_file?t="+(new Date).getTime()+"&need_trace=true",o&&o.length>0&&(s=o.map((function(t){return"area_id=".concat(encodeURIComponent(t))})).join("&"),i+="&".concat(s)),t.next=13,this.Http.getData(i);case 14:case"end":return t.stop()}}),t,this)}))),function(t){return w.apply(this,arguments)})},{key:"postFileUpload",value:(m=O(S().mark((function t(e){var r,n,o;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.isLoggedIn,n=e.assetData,!r){t.next=8;break}return o="/api/v1/storage/create_asset",t.next=5,this.Http.postData(o,n);case 5:case 11:return t.abrupt("return",t.sent);case 8:return o="/api/v1/storage/temp_file/upload",t.next=11,this.Http.postData(o,n);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"getFileDownURL",value:(b=O(S().mark((function t(e){var r,n,o,i,a;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.assetCid,n=e.userId,o=e.areaId,i=e.hasTempFile,a=i?"/api/v1/storage/temp_file/download/".concat(r):n?"/api/v1/storage/open_asset?user_id=".concat(n,"&asset_cid=").concat(r):"/api/v1/storage/share_asset?asset_cid=".concat(r),null!=o&&""!=o&&(a+="&area_id=".concat(encodeURIComponent(o))),t.next=5,this.Http.getData(a);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)})},{key:"getAssetGroupInfo",value:(v=O(S().mark((function t(){var e,r=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=r.length>0&&void 0!==r[0]?r[0]:{cId:-1,groupId:-1}).cId){t.next=7;break}return t.next=4,this.Http.getData("/api/v1/storage/get_asset_group_info?cid=".concat(e.cId));case 4:case 10:return t.abrupt("return",t.sent);case 7:if(!e.groupId){t.next=11;break}return t.next=10,this.Http.getData("/api/v1/storage/get_asset_group_info?groupid=".concat(e.groupId));case 11:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"getAreaIdList",value:(g=O(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.Http.getData("/api/v1/storage/get_area_id");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"createGroup",value:(y=O(S().mark((function t(e,r){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.Http.getData("/api/v1/storage/create_group?name=".concat(encodeURIComponent(e),"&parent=").concat(r));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return y.apply(this,arguments)})},{key:"onAssetGroupList",value:(d=O(S().mark((function t(e,r,n){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.Http.getData("/api/v1/storage/get_asset_group_list?page=".concat(e,"&parent=").concat(r,"&page_size=").concat(n));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return d.apply(this,arguments)})},{key:"renameGroup",value:(p=O(S().mark((function t(){var e,r,n=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={group_id:(e=n.length>0&&void 0!==n[0]?n[0]:{groupId:-1,name:""}).groupId,new_name:e.name},t.next=4,this.Http.postData("/api/v1/storage/rename_group",r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"renameAsset",value:(h=O(S().mark((function t(){var e,r,n=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={asset_cid:(e=n.length>0&&void 0!==n[0]?n[0]:{assetId:-1,name:""}).assetId,new_name:e.name},t.next=4,this.Http.postData("/api/v1/storage/rename_group",r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"deleteGroup",value:(f=O(S().mark((function t(){var e,r=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{groupId:-1},t.next=3,this.Http.getData("/api/v1/storage/delete_group?group_id=".concat(e.groupId));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"deleteAsset",value:(l=O(S().mark((function t(){var e,r,n,o=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="/api/v1/storage/delete_asset?asset_cid=".concat((e=o.length>0&&void 0!==o[0]?o[0]:{assetId:-1,areaId:[]}).assetId),e.areaId&&e.areaId.length>0&&(n=e.areaId.map((function(t){return"area_id=".concat(encodeURIComponent(t))})).join("&"),r+="&".concat(n)),t.next=5,this.Http.getData(r);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"userInfo",value:(c=O(S().mark((function t(){var e,r,n,o;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.Http.getData("/api/v1/storage/get_storage_size");case 3:return e=t.sent,t.next=7,this.Http.getData("/api/v1/storage/get_vip_info");case 7:return r=t.sent,t.next=11,this.Http.getData("/api/v1/storage/get_asset_count");case 11:return n=t.sent,o=x(x(x({},e.data),r.data),n.data),t.abrupt("return",{code:0,data:o});case 14:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"postReport",value:(u=O(S().mark((function t(e){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.Http.postData("/api/v1/storage/transfer/report",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"createLink",value:(s=O(S().mark((function t(e){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.Http.getData("/api/v1/storage/create_link"+e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"shareStatusSet",value:(a=O(S().mark((function t(e){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.Http.getData("/api/v1/storage/share_status_set"+e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"shareLinkInfo",value:(i=O(S().mark((function t(e){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.Http.getData("/api/v1/storage/share_link_info"+e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"shareLinkUpdate",value:(o=O(S().mark((function t(e){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.Http.postData("/api/v1/storage/share_link_update",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"uploadFile",value:(n=O(S().mark((function t(e,r,n,o,i){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.Http.uploadFile(e,r,n,null,i,o);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,r,o,i){return n.apply(this,arguments)})}],e&&A(t.prototype,e),r&&A(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i,a,s,u,c,l,f,h,p,d,y,g,v,b,m,w}();const R=T;function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){N(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function N(t,e,r){return(e=U(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z(){z=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:L(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",g={};function v(){}function b(){}function m(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(R([])));E&&E!==r&&n.call(E,a)&&(w=E);var x=m.prototype=v.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==j(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=O(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(j(e)+" is not iterable")}return b.prototype=m,o(x,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:b,configurable:!0}),b.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},_(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),c(x,u,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function F(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U(n.key),n)}}function U(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==j(e)?e:e+""}var B=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.httpService=e},e=[{key:"postReport",value:(n=z().mark((function t(e,r,n,o,i,a,u,l,f){var h,p;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h={trace_id:null!=e?e:"",cid:r,node_id:n,rate:o,cost_ms:i,total_size:a,state:u,transfer_type:l,log:f},t.next=4,this.httpService.postReport(h);case 4:if(0===(p=t.sent).code){t.next=7;break}return t.abrupt("return",c({code:p.code,msg:"Failed to report"}));case 7:return t.abrupt("return",p);case 10:return t.prev=10,t.t0=t.catch(0),console.log(333,t.t0),t.abrupt("return",c({code:s.REPORT_ERROR,msg:"Failed to report: "+t.t0}));case 14:case"end":return t.stop()}}),t,this,[[0,10]])})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){F(i,r,o,a,s,"next",t)}function s(t){F(i,r,o,a,s,"throw",t)}a(void 0)}))},function(t,e,r,n,i,a,s,u,c){return o.apply(this,arguments)})},{key:"creatReportData",value:function(t,e){if(0!=t.length){var r=t,n=r.map((function(t){return t.nodeId.toLowerCase()})).join(", "),o=r.reduce((function(t,e){return P(P({},t),e.log)}),{}),i=0===Object.keys(o).length?null:JSON.stringify(o),a=r[0].traceId,s=r[0].cId,u=n,c=r[0].transferRate,l=r[0].elapsedTime,f=r[0].size,h=r[0].status,p=e,d=i;this.postReport(a,s,u,c,l,f,h,p,d)}}}],e&&C(t.prototype,e),r&&C(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();const M=B;var G=__webpack_require__(232),H=__webpack_require__.n(G);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function V(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){Y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Y(t,e,r){return(e=Z(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W(){W=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:L(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",g={};function v(){}function b(){}function m(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(R([])));E&&E!==r&&n.call(E,a)&&(w=E);var x=m.prototype=v.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==$(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=O(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError($(e)+" is not iterable")}return b.prototype=m,o(x,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:b,configurable:!0}),b.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},_(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),c(x,u,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function K(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function J(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){K(i,n,o,a,s,"next",t)}function s(t){K(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z(n.key),n)}}function Z(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$(e)?e:e+""}var X=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.httpService=e,this.report=new M(this.httpService),this.abortController=null},e=[{key:"uploadFile",value:(f=J(W().mark((function t(e,r,n,o,i){var a,s,u,l;return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.httpService.uploadFile(e,r,n,o,i);case 3:if(0===(a=t.sent).code){t.next=6;break}return t.abrupt("return",c({code:a.code,msg:"Failed to upload file: "+a.msg,data:null!==(s=a.data)&&void 0!==s?s:{}}));case 6:return t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",c({code:t.t0.code,msg:null!==(u="Failed to upload file: "+t.t0.msg)&&void 0!==u?u:"",data:null!==(l=t.t0.data)&&void 0!==l?l:{}}));case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(t,e,r,n,o){return f.apply(this,arguments)})},{key:"onFileUpload",value:(l=J(W().mark((function t(e,r,n){var o,i,a,s,u,c,l,f,h;return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.areaId,i=void 0===o?[]:o,a=r.groupId,s=void 0===a?0:a,r.assetType,u=r.extraId,c=void 0===u?"":u,l=r.retryCount,f=void 0===l?3:l,t.next=3,this.handleFileUpload(e,i,s,c,f,n);case 3:return h=t.sent,t.abrupt("return",h);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return l.apply(this,arguments)})},{key:"handleFileUpload",value:(a=J(W().mark((function t(e,r,n,o){var i,a,u,l,f,h,p,d,y,g,v,b,m,w,k,E=this,x=arguments;return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=x.length>4&&void 0!==x[4]?x[4]:3,a=x.length>5?x[5]:void 0,u=-1===n,l=[],f=Date.now(),t.prev=6,t.next=9,this.calculateFileHash(e);case 9:if(0==(h=t.sent).code){t.next=12;break}return t.abrupt("return",h);case 12:return p=h.data.hash,t.next=15,this.httpService.getFileUploadURL({isLoggedIn:!u,areaIds:r,assetData:p});case 15:if(0==(d=t.sent).code){t.next=18;break}return t.abrupt("return",d);case 18:if(!d.data.AlreadyExists){t.next=23;break}return t.next=21,this.onCreateAsset(u,e,r,n,o,p,{cid:d.data.CID,nodeId:""});case 21:return y=t.sent,t.abrupt("return",y);case 23:return g=d.data,v=function(){var t=J(W().mark((function t(r){var n,o,i,s,u,c,h,p;return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E.abortController=new AbortController,i=r.NodeID.replace(/^c_/,""),t.next=4,E.uploadFile(r.UploadURL,r.Token,e,E.abortController.signal,(function(t,e,r){a&&a(t,e,r)}));case 4:return s=t.sent,u=null!==(n=g.TraceID)&&void 0!==n?n:"",c=Date.now(),h=c-f,p=Math.floor(e.size/h*1e3),l.push(V({status:0===s.code?1:2,msg:s.msg,elapsedTime:h,transferRate:p,size:e.size,traceId:u,nodeId:i,cId:null!==(o=s.cid)&&void 0!==o?o:"",log:0===s.code?"":Y({},i,s.msg)},s)),s.nodeId=r.NodeID,s.code,t.abrupt("return",s);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=27,this.uploadWithRetry(g.List,v,i,a);case 27:if(0!==(b=t.sent).code){t.next=34;break}return t.next=31,this.onCreateAsset(u,e,r,n,o,p,b);case 31:m=t.sent,t.next=35;break;case 34:m={code:-1,msg:null!==(w=b.msg)&&void 0!==w?w:"Upload addresses failed.",data:null!==(k=b.data)&&void 0!==k?k:{}};case 35:return this.report.creatReportData(l,"upload"),t.abrupt("return",m);case 39:return t.prev=39,t.t0=t.catch(6),t.abrupt("return",c({code:s.FAILURE,msg:t.t0}));case 42:case"end":return t.stop()}}),t,this,[[6,39]])}))),function(t,e,r,n){return a.apply(this,arguments)})},{key:"uploadWithRetry",value:(i=J(W().mark((function t(e,r,n,o){var i;return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(){var t=J(W().mark((function t(o){var a,c,l;return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o>=e.length)){t.next=2;break}return t.abrupt("return",{code:s.UPLOAD_FILE_ERROR,msg:"upload addresses failed."});case 2:a=W().mark((function t(n){var i;return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r(e[o]);case 3:if(u("uploadWithRetry",i=t.sent),0!==i.code&&-200!=i.code){t.next=7;break}return t.abrupt("return",{v:i});case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,new Promise((function(t){return setTimeout(t,1e3*Math.pow(2,n))}));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})),l=0;case 4:if(!(l<n)){t.next=12;break}return t.delegateYield(a(l),"t0",6);case 6:if(!(c=t.t0)){t.next=9;break}return t.abrupt("return",c.v);case 9:l++,t.next=4;break;case 12:return t.abrupt("return",i(o+1));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.abrupt("return",i(0));case 2:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return i.apply(this,arguments)})},{key:"calculateFileHash",value:(o=J(W().mark((function t(e){return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(){var e=H().ArrayBuffer.hash(n.result);t({code:0,data:{hash:e}})},n.onerror=function(t){r({code:s.FAILURE,msg:t})}})));case 1:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"onCreateAsset",value:(n=J(W().mark((function t(e,r,n,o,i,a,s){var u,l;return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u={asset_name:r.name,asset_type:"file",asset_size:r.size,asset_cid:s.cid,group_id:o,node_id:s.nodeId,extra_id:i},e){t.next=7;break}return t.next=4,this.httpService.postFileUpload({isLoggedIn:!0,assetData:V(V({},u),{},{md5:a,area_id:n})});case 4:l=t.sent,t.next=10;break;case 7:return t.next=9,this.httpService.postFileUpload({isLoggedIn:!1,assetData:V(V({},u),{},{area_ids:n})});case 9:l=t.sent;case 10:if(!l.data.err||1017!==l.data.err){t.next=14;break}return t.abrupt("return",c({code:0,data:{cid:s.cid,isAlreadyExist:!0,url:l.data.assetDirectUrl}}));case 14:return t.abrupt("return",c({code:l.code,data:{cid:s.cid},msg:"Upload success"}));case 15:case"end":return t.stop()}}),t,this)}))),function(t,e,r,o,i,a,s){return n.apply(this,arguments)})},{key:"cancelUpload",value:function(){this.abortController&&(this.abortController.abort(),this.abortController=null)}}],e&&Q(t.prototype,e),r&&Q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i,a,l,f}();const tt=X,et=new Uint8Array(0);function rt(t){const e=t.match(/../g);return null!=e?new Uint8Array(e.map((t=>parseInt(t,16)))):et}function nt(t){if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}var ot=function(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var i=t.charAt(o),a=i.charCodeAt(0);if(255!==r[a])throw new TypeError(i+" is ambiguous");r[a]=o}var s=t.length,u=t.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){for(var n=0,o=0;t[e]===u;)n++,e++;for(var i=(t.length-e)*c+1>>>0,a=new Uint8Array(i);t[e];){var l=r[t.charCodeAt(e)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<o)&&-1!==h;h--,f++)l+=s*a[h]>>>0,a[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=f,e++}if(" "!==t[e]){for(var p=i-o;p!==i&&0===a[p];)p++;for(var d=new Uint8Array(n+(i-p)),y=n;p!==i;)d[y++]=a[p++];return d}}}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,o=0,i=e.length;o!==i&&0===e[o];)o++,r++;for(var a=(i-o)*l+1>>>0,c=new Uint8Array(a);o!==i;){for(var f=e[o],h=0,p=a-1;(0!==f||h<n)&&-1!==p;p--,h++)f+=256*c[p]>>>0,c[p]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,o++}for(var d=a-n;d!==a&&0===c[d];)d++;for(var y=u.repeat(r);d<a;++d)y+=t.charAt(c[d]);return y},decodeUnsafe:f,decode:function(t){var r=f(t);if(r)return r;throw new Error(`Non-${e} character`)}}};const it=ot;class at{name;prefix;baseEncode;constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class st{name;prefix;baseDecode;prefixCodePoint;constructor(t,e,r){this.name=t,this.prefix=e;const n=e.codePointAt(0);if(void 0===n)throw new Error("Invalid prefix character");this.prefixCodePoint=n,this.baseDecode=r}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return ct(this,t)}}class ut{decoders;constructor(t){this.decoders=t}or(t){return ct(this,t)}decode(t){const e=t[0],r=this.decoders[e];if(null!=r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function ct(t,e){return new ut({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}class lt{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new at(t,e,r),this.decoder=new st(t,e,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function ft({name:t,prefix:e,encode:r,decode:n}){return new lt(t,e,r,n)}function ht({name:t,prefix:e,alphabet:r}){const{encode:n,decode:o}=it(r,t);return ft({prefix:e,name:t,encode:n,decode:t=>nt(o(t))})}function pt({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return ft({prefix:e,name:t,encode:t=>function(t,e,r){const n="="===e[e.length-1],o=(1<<r)-1;let i="",a=0,s=0;for(let n=0;n<t.length;++n)for(s=s<<8|t[n],a+=8;a>r;)a-=r,i+=e[o&s>>a];if(0!==a&&(i+=e[o&s<<r-a]),n)for(;i.length*r&7;)i+="=";return i}(t,n,r),decode:e=>function(t,e,r,n){const o={};for(let t=0;t<e.length;++t)o[e[t]]=t;let i=t.length;for(;"="===t[i-1];)--i;const a=new Uint8Array(i*r/8|0);let s=0,u=0,c=0;for(let e=0;e<i;++e){const i=o[t[e]];if(void 0===i)throw new SyntaxError(`Non-${n} character`);u=u<<r|i,s+=r,s>=8&&(s-=8,a[c++]=255&u>>s)}if(s>=r||255&u<<8-s)throw new SyntaxError("Unexpected end of data");return a}(e,n,r,t)})}const dt=pt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yt=(pt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),pt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ht({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"})),gt=(ht({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ht({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}));ht({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var vt=function t(e,r,n){r=r||[],n=n||0;var o=n;for(;e>=wt;)r[n++]=255&e|bt,e/=128;for(;e&mt;)r[n++]=255&e|bt,e>>>=7;return r[n]=0|e,t.bytes=n-o+1,r},bt=128,mt=-128,wt=Math.pow(2,31);var kt=function t(e,r){var n,o=0,i=(r=r||0,0),a=r,s=e.length;do{if(a>=s)throw t.bytes=0,new RangeError("Could not decode varint");n=e[a++],o+=i<28?(n&xt)<<i:(n&xt)*Math.pow(2,i),i+=7}while(n>=Et);return t.bytes=a-r,o},Et=128,xt=127;var _t=Math.pow(2,7),St=Math.pow(2,14),Lt=Math.pow(2,21),Ot=Math.pow(2,28),At=Math.pow(2,35),It=Math.pow(2,42),Tt=Math.pow(2,49),Rt=Math.pow(2,56),jt=Math.pow(2,63);const Dt={encode:vt,decode:kt,encodingLength:function(t){return t<_t?1:t<St?2:t<Lt?3:t<Ot?4:t<At?5:t<It?6:t<Tt?7:t<Rt?8:t<jt?9:10}};function Pt(t,e=0){return[Dt.decode(t,e),Dt.decode.bytes]}function Nt(t,e,r=0){return Dt.encode(t,e,r),e}function zt(t){return Dt.encodingLength(t)}function Ft(t,e){const r=e.byteLength,n=zt(t),o=n+zt(r),i=new Uint8Array(o+r);return Nt(t,i,0),Nt(r,i,n),i.set(e,o),new Ct(t,r,e,i)}class Ct{code;size;digest;bytes;constructor(t,e,r,n){this.code=t,this.size=e,this.digest=r,this.bytes=n}}function Ut(t,e){const{bytes:r,version:n}=t;return 0===n?function(t,e,r){const{prefix:n}=r;if(n!==gt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=e.get(n);if(null==o){const o=r.encode(t).slice(1);return e.set(n,o),o}return o}(r,Mt(t),e??gt.encoder):function(t,e,r){const{prefix:n}=r,o=e.get(n);if(null==o){const o=r.encode(t);return e.set(n,o),o}return o}(r,Mt(t),e??dt.encoder)}const Bt=new WeakMap;function Mt(t){const e=Bt.get(t);if(null==e){const e=new Map;return Bt.set(t,e),e}return e}class Gt{code;version;multihash;bytes;"/";constructor(t,e,r,n){this.code=e,this.version=t,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:e}=this;if(t!==Ht)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==$t)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Gt.createV0(e)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,r=Ft(t,e);return Gt.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return Gt.equals(this,t)}static equals(t,e){const r=e;return null!=r&&t.code===r.code&&t.version===r.version&&function(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&function(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}(t.bytes,r.bytes)}}(t.multihash,r.multihash)}toString(t){return Ut(this,t)}toJSON(){return{"/":Ut(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(null==t)return null;const e=t;if(e instanceof Gt)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){const{version:t,code:r,multihash:n,bytes:o}=e;return new Gt(t,r,n,o??qt(t,r,n.bytes))}if(!0===e[Vt]){const{version:t,multihash:r,code:n}=e,o=function(t){const e=nt(t),[r,n]=Pt(e),[o,i]=Pt(e.subarray(n)),a=e.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new Ct(r,o,a,e)}(r);return Gt.create(t,n,o)}return null}static create(t,e,r){if("number"!=typeof e)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:if(e!==Ht)throw new Error(`Version 0 CID must use dag-pb (code: ${Ht}) block encoding`);return new Gt(t,e,r,r.bytes);case 1:{const n=qt(t,e,r.bytes);return new Gt(t,e,r,n)}default:throw new Error("Invalid version")}}static createV0(t){return Gt.create(0,Ht,t)}static createV1(t,e){return Gt.create(1,t,e)}static decode(t){const[e,r]=Gt.decodeFirst(t);if(0!==r.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=Gt.inspectBytes(t),r=e.size-e.multihashSize,n=nt(t.subarray(r,r+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");const o=n.subarray(e.multihashSize-e.digestSize),i=new Ct(e.multihashCode,e.digestSize,o,n);return[0===e.version?Gt.createV0(i):Gt.createV1(e.codec,i),t.subarray(e.size)]}static inspectBytes(t){let e=0;const r=()=>{const[r,n]=Pt(t.subarray(e));return e+=n,r};let n=r(),o=Ht;if(18===n?(n=0,e=0):o=r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const i=e,a=r(),s=r(),u=e+s;return{version:n,codec:o,multihashCode:a,digestSize:s,multihashSize:u-i,size:u}}static parse(t,e){const[r,n]=function(t,e){switch(t[0]){case"Q":{const r=e??gt;return[gt.prefix,r.decode(`${gt.prefix}${t}`)]}case gt.prefix:{const r=e??gt;return[gt.prefix,r.decode(t)]}case dt.prefix:{const r=e??dt;return[dt.prefix,r.decode(t)]}case yt.prefix:{const r=e??yt;return[yt.prefix,r.decode(t)]}default:if(null==e)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}(t,e),o=Gt.decode(n);if(0===o.version&&"Q"!==t[0])throw Error("Version 0 CID string must not include multibase prefix");return Mt(o).set(r,t),o}}const Ht=112,$t=18;function qt(t,e,r){const n=zt(t),o=n+zt(e),i=new Uint8Array(o+r.byteLength);return Nt(t,i,0),Nt(e,i,n),i.set(r,o),i}const Vt=Symbol.for("@ipld/js-cid/CID"),Yt=new TextDecoder;function Wt(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const o=t[e++];if(r+=n<28?(127&o)<<n:(127&o)*2**n,o<128)break}return[r,e]}function Kt(t,e){let r;[r,e]=Wt(t,e);const n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function Jt(t,e){let r;return[r,e]=Wt(t,e),[7&r,r>>3,e]}function Qt(t){const e={},r=t.length;let n=0;for(;n<r;){let r,o;if([r,o,n]=Jt(t,n),1===o){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Hash`);if(void 0!==e.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=Kt(t,n)}else if(2===o){if(void 0!==e.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Name`);if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,n]=Kt(t,n),e.Name=Yt.decode(o)}else{if(3!==o)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`);if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Tsize`);[e.Tsize,n]=Wt(t,n)}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}const Zt=new TextEncoder,Xt=2**32,te=2**31;function ee(t,e){let r=e.length;if("number"==typeof t.Tsize){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=oe(e,r,t.Tsize)-1,e[r]=24}if("string"==typeof t.Name){const n=Zt.encode(t.Name);r-=n.length,e.set(n,r),r=oe(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=oe(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function re(t){const e=function(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+ie(r)}if(t.Links)for(const r of t.Links){const t=ne(r);e+=1+t+ie(t)}return e}(t),r=new Uint8Array(e);let n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=oe(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let e=t.Links.length-1;e>=0;e--){const o=ee(t.Links[e],r.subarray(0,n));n-=o,n=oe(r,n,o)-1,r[n]=18}return r}function ne(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+ie(r)}if("string"==typeof t.Name){const r=Zt.encode(t.Name).length;e+=1+r+ie(r)}return"number"==typeof t.Tsize&&(e+=1+ie(t.Tsize)),e}function oe(t,e,r){const n=e-=ie(r);for(;r>=te;)t[e++]=127&r|128,r/=128;for(;r>=128;)t[e++]=127&r|128,r>>>=7;return t[e]=r,n}function ie(t){return t%2==0&&t++,Math.floor((function(t){let e=0;t>=Xt&&(t=Math.floor(t/Xt),e=32);t>=65536&&(t>>>=16,e+=16);t>=256&&(t>>>=8,e+=8);return e+ae[t]}(t)+6)/7)}const ae=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],se=["Data","Links"],ue=["Hash","Name","Tsize"],ce=new TextEncoder;function le(t,e){if(t===e)return 0;const r=t.Name?ce.encode(t.Name):[],n=e.Name?ce.encode(e.Name):[];let o=r.length,i=n.length;for(let t=0,e=Math.min(o,i);t<e;++t)if(r[t]!==n[t]){o=r[t],i=n[t];break}return o<i?-1:i<o?1:0}function fe(t,e){return!Object.keys(t).some((t=>!e.includes(t)))}function he(t){if("object"==typeof t.asCID){const e=Gt.asCID(t);if(!e)throw new TypeError("Invalid DAG-PB form");return{Hash:e}}if("object"!=typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=Gt.asCID(t.Hash);try{r||("string"==typeof t.Hash?r=Gt.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=Gt.decode(t.Hash)))}catch(t){throw new TypeError(`Invalid DAG-PB form: ${t.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return"string"==typeof t.Name&&(e.Name=t.Name),"number"==typeof t.Tsize&&(e.Tsize=t.Tsize),e}function pe(t){if((t instanceof Uint8Array||"string"==typeof t)&&(t={Data:t}),"object"!=typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(void 0!==t.Data)if("string"==typeof t.Data)e.Data=ce.encode(t.Data);else{if(!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");e.Data=t.Data}if(void 0!==t.Links){if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form");e.Links=t.Links.map(he),e.Links.sort(le)}else e.Links=[];return e}function de(t){!function(t){if(!t||"object"!=typeof t||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!fe(t,se))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==t.Data&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||"object"!=typeof r||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!fe(r,ue))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(void 0===r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(null==r.Hash||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!=typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize){if("number"!=typeof r.Tsize||r.Tsize%1!=0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&-1===le(r,t.Links[e-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}(t);const e={};return t.Links&&(e.Links=t.Links.map((t=>{const e={};return t.Hash&&(e.Hash=t.Hash.bytes),void 0!==t.Name&&(e.Name=t.Name),void 0!==t.Tsize&&(e.Tsize=t.Tsize),e}))),t.Data&&(e.Data=t.Data),re(e)}function ye(t){const e=function(t){const e=t.length;let r,n,o=0,i=!1;for(;o<e;){let e,a;if([e,a,o]=Jt(t,o),2!==e)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${e}`);if(1===a){if(n)throw new Error("protobuf: (PBNode) duplicate Data section");[n,o]=Kt(t,o),r&&(i=!0)}else{if(2!==a)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${a}`);{if(i)throw new Error("protobuf: (PBNode) duplicate Links section");let e;r||(r=[]),[e,o]=Kt(t,o),r.push(Qt(e))}}}if(o>e)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return n&&(a.Data=n),a.Links=r||[],a}(function(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}(t)),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map((t=>{const e={};try{e.Hash=Gt.decode(t.Hash)}catch(t){}if(!e.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==t.Name&&(e.Name=t.Name),void 0!==t.Tsize&&(e.Tsize=t.Tsize),e}))),r}var ge=__webpack_require__(946);const ve=ge.Reader,be=ge.Writer,me=ge.util,we=ge.roots.unixfs||(ge.roots.unixfs={}),ke=we.Data=(()=>{function t(t){if(this.blocksizes=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.Type=0,t.prototype.Data=me.newBuffer([]),t.prototype.filesize=me.Long?me.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=me.emptyArray,t.prototype.hashType=me.Long?me.Long.fromBits(0,0,!0):0,t.prototype.fanout=me.Long?me.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(t,e){if(e||(e=be.create()),e.uint32(8).int32(t.Type),null!=t.Data&&Object.hasOwnProperty.call(t,"Data")&&e.uint32(18).bytes(t.Data),null!=t.filesize&&Object.hasOwnProperty.call(t,"filesize")&&e.uint32(24).uint64(t.filesize),null!=t.blocksizes&&t.blocksizes.length)for(var r=0;r<t.blocksizes.length;++r)e.uint32(32).uint64(t.blocksizes[r]);return null!=t.hashType&&Object.hasOwnProperty.call(t,"hashType")&&e.uint32(40).uint64(t.hashType),null!=t.fanout&&Object.hasOwnProperty.call(t,"fanout")&&e.uint32(48).uint64(t.fanout),null!=t.mode&&Object.hasOwnProperty.call(t,"mode")&&e.uint32(56).uint32(t.mode),null!=t.mtime&&Object.hasOwnProperty.call(t,"mtime")&&we.UnixTime.encode(t.mtime,e.uint32(66).fork()).ldelim(),e},t.decode=function(t,e){t instanceof ve||(t=ve.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new we.Data;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.Type=t.int32();break;case 2:n.Data=t.bytes();break;case 3:n.filesize=t.uint64();break;case 4:if(n.blocksizes&&n.blocksizes.length||(n.blocksizes=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)n.blocksizes.push(t.uint64());else n.blocksizes.push(t.uint64());break;case 5:n.hashType=t.uint64();break;case 6:n.fanout=t.uint64();break;case 7:n.mode=t.uint32();break;case 8:n.mtime=we.UnixTime.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("Type"))throw me.ProtocolError("missing required 'Type'",{instance:n});return n},t.fromObject=function(t){if(t instanceof we.Data)return t;var e=new we.Data;switch(t.Type){case"Raw":case 0:e.Type=0;break;case"Directory":case 1:e.Type=1;break;case"File":case 2:e.Type=2;break;case"Metadata":case 3:e.Type=3;break;case"Symlink":case 4:e.Type=4;break;case"HAMTShard":case 5:e.Type=5}if(null!=t.Data&&("string"==typeof t.Data?me.base64.decode(t.Data,e.Data=me.newBuffer(me.base64.length(t.Data)),0):t.Data.length&&(e.Data=t.Data)),null!=t.filesize&&(me.Long?(e.filesize=me.Long.fromValue(t.filesize)).unsigned=!0:"string"==typeof t.filesize?e.filesize=parseInt(t.filesize,10):"number"==typeof t.filesize?e.filesize=t.filesize:"object"==typeof t.filesize&&(e.filesize=new me.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");e.blocksizes=[];for(var r=0;r<t.blocksizes.length;++r)me.Long?(e.blocksizes[r]=me.Long.fromValue(t.blocksizes[r])).unsigned=!0:"string"==typeof t.blocksizes[r]?e.blocksizes[r]=parseInt(t.blocksizes[r],10):"number"==typeof t.blocksizes[r]?e.blocksizes[r]=t.blocksizes[r]:"object"==typeof t.blocksizes[r]&&(e.blocksizes[r]=new me.LongBits(t.blocksizes[r].low>>>0,t.blocksizes[r].high>>>0).toNumber(!0))}if(null!=t.hashType&&(me.Long?(e.hashType=me.Long.fromValue(t.hashType)).unsigned=!0:"string"==typeof t.hashType?e.hashType=parseInt(t.hashType,10):"number"==typeof t.hashType?e.hashType=t.hashType:"object"==typeof t.hashType&&(e.hashType=new me.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),null!=t.fanout&&(me.Long?(e.fanout=me.Long.fromValue(t.fanout)).unsigned=!0:"string"==typeof t.fanout?e.fanout=parseInt(t.fanout,10):"number"==typeof t.fanout?e.fanout=t.fanout:"object"==typeof t.fanout&&(e.fanout=new me.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),null!=t.mode&&(e.mode=t.mode>>>0),null!=t.mtime){if("object"!=typeof t.mtime)throw TypeError(".Data.mtime: object expected");e.mtime=we.UnixTime.fromObject(t.mtime)}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.blocksizes=[]),e.defaults){if(r.Type=e.enums===String?"Raw":0,e.bytes===String?r.Data="":(r.Data=[],e.bytes!==Array&&(r.Data=me.newBuffer(r.Data))),me.Long){var n=new me.Long(0,0,!0);r.filesize=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.filesize=e.longs===String?"0":0;if(me.Long){n=new me.Long(0,0,!0);r.hashType=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.hashType=e.longs===String?"0":0;if(me.Long){n=new me.Long(0,0,!0);r.fanout=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.fanout=e.longs===String?"0":0;r.mode=0,r.mtime=null}if(null!=t.Type&&t.hasOwnProperty("Type")&&(r.Type=e.enums===String?we.Data.DataType[t.Type]:t.Type),null!=t.Data&&t.hasOwnProperty("Data")&&(r.Data=e.bytes===String?me.base64.encode(t.Data,0,t.Data.length):e.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),null!=t.filesize&&t.hasOwnProperty("filesize")&&("number"==typeof t.filesize?r.filesize=e.longs===String?String(t.filesize):t.filesize:r.filesize=e.longs===String?me.Long.prototype.toString.call(t.filesize):e.longs===Number?new me.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){r.blocksizes=[];for(var o=0;o<t.blocksizes.length;++o)"number"==typeof t.blocksizes[o]?r.blocksizes[o]=e.longs===String?String(t.blocksizes[o]):t.blocksizes[o]:r.blocksizes[o]=e.longs===String?me.Long.prototype.toString.call(t.blocksizes[o]):e.longs===Number?new me.LongBits(t.blocksizes[o].low>>>0,t.blocksizes[o].high>>>0).toNumber(!0):t.blocksizes[o]}return null!=t.hashType&&t.hasOwnProperty("hashType")&&("number"==typeof t.hashType?r.hashType=e.longs===String?String(t.hashType):t.hashType:r.hashType=e.longs===String?me.Long.prototype.toString.call(t.hashType):e.longs===Number?new me.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),null!=t.fanout&&t.hasOwnProperty("fanout")&&("number"==typeof t.fanout?r.fanout=e.longs===String?String(t.fanout):t.fanout:r.fanout=e.longs===String?me.Long.prototype.toString.call(t.fanout):e.longs===Number?new me.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),null!=t.mode&&t.hasOwnProperty("mode")&&(r.mode=t.mode),null!=t.mtime&&t.hasOwnProperty("mtime")&&(r.mtime=we.UnixTime.toObject(t.mtime,e)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},t.DataType=function(){const t={},e=Object.create(t);return e[t[0]="Raw"]=0,e[t[1]="Directory"]=1,e[t[2]="File"]=2,e[t[3]="Metadata"]=3,e[t[4]="Symlink"]=4,e[t[5]="HAMTShard"]=5,e}(),t})(),Ee=(we.UnixTime=(()=>{function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.Seconds=me.Long?me.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(t,e){return e||(e=be.create()),e.uint32(8).int64(t.Seconds),null!=t.FractionalNanoseconds&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&e.uint32(21).fixed32(t.FractionalNanoseconds),e},t.decode=function(t,e){t instanceof ve||(t=ve.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new we.UnixTime;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.Seconds=t.int64();break;case 2:n.FractionalNanoseconds=t.fixed32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("Seconds"))throw me.ProtocolError("missing required 'Seconds'",{instance:n});return n},t.fromObject=function(t){if(t instanceof we.UnixTime)return t;var e=new we.UnixTime;return null!=t.Seconds&&(me.Long?(e.Seconds=me.Long.fromValue(t.Seconds)).unsigned=!1:"string"==typeof t.Seconds?e.Seconds=parseInt(t.Seconds,10):"number"==typeof t.Seconds?e.Seconds=t.Seconds:"object"==typeof t.Seconds&&(e.Seconds=new me.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),null!=t.FractionalNanoseconds&&(e.FractionalNanoseconds=t.FractionalNanoseconds>>>0),e},t.toObject=function(t,e){e||(e={});var r={};if(e.defaults){if(me.Long){var n=new me.Long(0,0,!1);r.Seconds=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.Seconds=e.longs===String?"0":0;r.FractionalNanoseconds=0}return null!=t.Seconds&&t.hasOwnProperty("Seconds")&&("number"==typeof t.Seconds?r.Seconds=e.longs===String?String(t.Seconds):t.Seconds:r.Seconds=e.longs===String?me.Long.prototype.toString.call(t.Seconds):e.longs===Number?new me.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),null!=t.FractionalNanoseconds&&t.hasOwnProperty("FractionalNanoseconds")&&(r.FractionalNanoseconds=t.FractionalNanoseconds),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},t})(),we.Metadata=(()=>{function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.MimeType="",t.encode=function(t,e){return e||(e=be.create()),null!=t.MimeType&&Object.hasOwnProperty.call(t,"MimeType")&&e.uint32(10).string(t.MimeType),e},t.decode=function(t,e){t instanceof ve||(t=ve.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new we.Metadata;t.pos<r;){var o=t.uint32();if(o>>>3==1)n.MimeType=t.string();else t.skipType(7&o)}return n},t.fromObject=function(t){if(t instanceof we.Metadata)return t;var e=new we.Metadata;return null!=t.MimeType&&(e.MimeType=String(t.MimeType)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.MimeType=""),null!=t.MimeType&&t.hasOwnProperty("MimeType")&&(r.MimeType=t.MimeType),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,ge.util.toJSONOptions)},t})(),ke.DataType),xe=Object.freeze([]),_e=new Uint8Array(0),Se=Object.freeze({}),Le=parseInt("0644",8),Oe=parseInt("0755",8),Ae=112,Ie="UnixFS",Te=(t,e)=>(Object(globalThis).debug&&console.log({data:t,links:e}),de(pe({Data:ke.encode(t).finish(),Links:e}))),Re=t=>({type:Ee.Raw,content:t}),je=t=>De(_e,t),De=(t,e)=>({type:Ee.File,layout:"simple",content:t,metadata:hr(e)}),Pe=t=>({type:Ee.File,layout:"simple",content:t}),Ne=(t,e)=>({type:Ee.File,layout:"advanced",parts:t,metadata:hr(e)}),ze=t=>({type:Ee.File,layout:"advanced",parts:t}),Fe=(t,e,r)=>({type:Ee.File,layout:"complex",content:t,parts:e,metadata:hr(r)}),Ce=(t,e)=>({type:Ee.Directory,metadata:hr(e),entries:t}),Ue=(t,e,r,n,o=Se)=>({type:Ee.HAMTShard,bitfield:e,fanout:Qe(r),hashType:Ze(n),entries:t,metadata:hr(o)}),Be=(t,e,r,n)=>({type:Ee.HAMTShard,bitfield:e,fanout:Qe(r),hashType:Ze(n),entries:t}),Me=t=>Te({Type:Ee.Raw,Data:t.byteLength>0?t:void 0,filesize:t.byteLength,blocksizes:xe},[]),Ge=(t,e=!1)=>{const r=e?Se:Object(t).metadata;switch(t.layout){case"simple":return Ye(t.content,r);case"advanced":return qe(t.parts,r);case"complex":return We(t.content,t.parts,r);default:throw new TypeError(`File with unknown layout "${Object(t).layout}" was passed`)}},He=t=>Ye(t,Se),$e=t=>Te({Type:Ee.File,blocksizes:t.map(ur),filesize:ar(t)},t.map(Ve)),qe=(t,e=Se)=>Te({Type:Ee.File,blocksizes:t.map(ur),filesize:ar(t),...fr(e)},t.map(Ve)),Ve=t=>({Name:"",Tsize:t.dagByteLength,Hash:t.cid}),Ye=(t,e=Se)=>Te({Type:Ee.File,Data:t.byteLength>0?t:void 0,filesize:t.byteLength,blocksizes:[],...fr(e)},[]),We=(t,e,r=Se)=>Te({Type:Ee.File,Data:t,filesize:t.byteLength+ar(e),blocksizes:e.map(ur)},e.map(Ve)),Ke=t=>Te({Type:t.type,...lr(t.metadata||Se)},t.entries.map(cr)),Je=({bitfield:t,fanout:e,hashType:r,entries:n,metadata:o=Se})=>Te({Type:Ee.HAMTShard,Data:t.byteLength>0?t:void 0,fanout:Qe(e),hashType:Ze(r),...lr(o)},n.map(cr)),Qe=t=>{if(Math.log2(t)%1==0)return t;throw new TypeError(`Expected hamt size to be a power of two instead got ${t}`)},Ze=t=>{if(Number.isInteger(t))return t;throw new TypeError(`Expected an integer value instead got ${t}`)},Xe=(t,e=Se)=>({type:Ee.Symlink,content:t,metadata:hr(e)}),tr=(t,e=!1)=>{const r=e?Se:Object(t).metadata;return Te({Type:Ee.Symlink,Data:t.content,...fr(r||Se)},[])},er=(t,e=!0)=>{switch(t.type){case Ee.Raw:return Me(t.content);case Ee.File:return Ge(t);case Ee.Directory:return Ke(t);case Ee.HAMTShard:return Je(t);case Ee.Symlink:return tr(t);default:throw new Error(`Unknown node type ${Object(t).type}`)}},rr=t=>{const e=ye(t),r=ke.decode(e.Data),{Type:n,Data:o,mtime:i,mode:a,blocksizes:s,...u}=ke.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}),c={...a&&{mode:a},...nr(i)},l=e.Links;switch(r.Type){case Ee.Raw:return Re(o);case Ee.File:return 0===l.length?new vr(o,c):0===o.byteLength?new br(or(u.blocksizes,l),c):new mr(o,or(u.blocksizes,l),c);case Ee.Directory:return Ce(ir(l),c);case Ee.HAMTShard:return Ue(ir(l),o||_e,u.fanout,u.hashType,c);case Ee.Symlink:return Xe(o,c);default:throw new TypeError(`Unsupported node type ${r.Type}`)}},nr=t=>null==t?void 0:{mtime:{secs:t.Seconds,nsecs:t.FractionalNanoseconds||0}},or=(t,e)=>{const r=[],n=t.length;for(;0<n;)r.push({cid:e[0].Hash,dagByteLength:e[0].Tsize||0,contentByteLength:t[0]});return r},ir=t=>t.map((t=>({cid:t.Hash,name:t.Name||"",dagByteLength:t.Tsize||0}))),ar=t=>t.reduce(((t,e)=>t+e.contentByteLength),0),sr=(t,e)=>e.reduce(((t,e)=>t+e.dagByteLength),t.byteLength),ur=t=>t.contentByteLength,cr=({name:t,dagByteLength:e,cid:r})=>({Name:t,Tsize:e,Hash:r}),lr=t=>fr(t,Oe),fr=({mode:t,mtime:e},r=Le)=>({mode:null!=t?dr(t,r):void 0,mtime:null!=e?pr(e):void 0}),hr=t=>null==t?Se:{...null==t.mode?void 0:{mode:yr(t.mode)},...null==t.mtime?void 0:{mtime:t.mtime}},pr=t=>null==t?void 0:0!==t.nsecs?{Seconds:t.secs,FractionalNanoseconds:t.nsecs}:{Seconds:t.secs},dr=(t,e)=>{const r=null==t?void 0:yr(t);return r===e||null==r?void 0:r},yr=t=>4095&t|4294963200&t,gr=({content:t=_e,parts:e=xe,metadata:r=Se,...n})=>0===e.length?new vr(t,r):0===t.byteLength?new br(e,r):new mr(t,e,r);class vr{constructor(t,e){this.content=t,this.metadata=e,this.layout="simple",this.type=Ee.File}get filesize(){return this.content.byteLength}encode(){return Ye(this.content,this.metadata)}}class br{constructor(t,e){this.parts=t,this.metadata=e}get layout(){return"advanced"}get type(){return Ee.File}get fileSize(){return ar(this.parts)}get blockSizes(){return this.parts.map(ur)}encode(){return qe(this.parts,this.metadata)}}class mr{constructor(t,e,r){this.content=t,this.parts=e,this.metadata=r}get layout(){return"complex"}get type(){return Ee.File}get fileSize(){return this.content.byteLength+ar(this.parts)}get blockSizes(){return this.parts.map(ur)}encode(){return We(this.content,this.parts,this.metadata)}}const wr=t=>{switch(t.type){case Ee.Raw:case Ee.Symlink:return t.content.byteLength;case Ee.File:switch(t.layout){case"simple":return t.content.byteLength;case"advanced":return ar(t.parts);case"complex":return t.content.byteLength+ar(t.parts)}default:return 0}},kr=function*(t){const e=yield*t;yield*Lr(e)};function*Er(){return yield Dr}const xr=function*(){yield Pr};const _r=function*(t){const e=yield*Er();if(Sr(t)){let r,n=!1;if(t.then((t=>{n=!1,r=t,Cr(e)}),(t=>{n=!0,r=t,Cr(e)})),yield*xr(),n)throw r;return r}return Fr(function*(t){Cr(t)}(e)),yield*xr(),t};const Sr=t=>null!=t&&"function"==typeof t.then,Lr=function*(t){yield t},Or=function*(t){const e=[];for(const r of Object.entries(t)){const[t,n]=r;n!==tn&&e.push(yield*Br(Ir(n,t)))}yield*Hr(e)},Ar=t=>t.length>0?function*(t){const e=[];for(const r of t)e.push(yield*Br(r));yield*Hr(e)}(t.map(kr)):tn;const Ir=(t,e)=>t===tn?tn:t instanceof Tr?new Tr([...t.tags,e],t.source):new Tr([e],t);class Tr{constructor(t,e){this.tags=t,this.source=e,this.controller}[Symbol.iterator](){return this.controller||(this.controller=this.source[Symbol.iterator]()),this}box(t){if(t.done)return t;switch(t.value){case Pr:case Dr:return t;default:{const e=t;let{value:r}=e;for(const t of this.tags)r=jr(t,r);return e.value=r,e}}}next(t){return this.box(this.controller.next(t))}throw(t){return this.box(this.controller.throw(t))}return(t){return this.box(this.controller.return(t))}get[Symbol.toStringTag](){return"TaggedEffect"}}const Rr=()=>tn,jr=(t,e)=>({type:t,[t]:e});const Dr=Symbol("current"),Pr=Symbol("suspend");class Nr{static of(t){return t.group||en}static enqueue(t,e){t.group=e,e.stack.active.push(t)}constructor(t,e=[],r=new Set,n=new zr(e,r)){this.driver=t,this.parent=Nr.of(t),this.stack=n,this.id=++Wr}}class zr{constructor(t=[],e=new Set){this.active=t,this.idle=e}static size({active:t,idle:e}){return t.length+e.size}}const Fr=t=>Cr(t[Symbol.iterator]()),Cr=t=>{let e=Nr.of(t);for(e.stack.active.push(t),e.stack.idle.delete(t);e.parent;){const{idle:t,active:r}=e.parent.stack;if(!t.has(e.driver))break;t.delete(e.driver),r.push(e.driver),e=e.parent}if(en.status===Kr)for(en.status=Jr;;)try{for(const t of Ur(en));en.status=Kr;break}catch(t){en.stack.active.shift()}},Ur=function*(t){const{active:e}=t.stack;let r=e[0];for(t.stack.idle.delete(r);r;){let n=Zr;t:for(;!n.done&&r===e[0];){const e=n.value;switch(e){case Pr:t.stack.idle.add(r);break t;case Dr:n=r.next(r);break;default:n=r.next(yield e)}}e.shift(),r=e[0],t.stack.idle.delete(r)}};const Br=(t,e)=>new Yr(t,e),Mr=(t,e)=>Gr(t,{ok:!1,error:e});function*Gr(t,e){try{const r=t,n=e.ok?r.return(e.value):r.throw(e.error);if(!n.done)if(n.value===Pr){const{idle:t}=Nr.of(r).stack;t.add(r)}else Cr(r)}catch(t){}}function*Hr(t){if(0===t.length)return;const e=yield*Er(),r=new Nr(e);let n=null;for(const e of t){const{result:t}=e;t?t.ok||n||(n=t):$r(e,r)}try{if(n)throw n.error;for(;yield*Ur(r),zr.size(r.stack)>0;)yield*xr()}catch(t){for(const e of r.stack.active)yield*Mr(e,t);for(const e of r.stack.idle)yield*Mr(e,t),Cr(e);throw t}}const $r=(t,e)=>{const r=Nr.of(t);if(r!==e){const{active:n,idle:o}=r.stack,i=e.stack;if(t.group=e,o.has(t))o.delete(t),i.idle.add(t);else{const e=n.indexOf(t);e>=0&&(n.splice(e,1),i.active.push(t))}}};function*qr(t){t.status===Kr&&(yield*t),t.result||(yield*Hr([t]));const e=t.result;if(e.ok)return e.value;throw e.error}class Vr{constructor(t){this.handler=t,this.result}get promise(){const{result:t}=this,e=null==t?new Promise(((t,e)=>{this.handler.onsuccess=t,this.handler.onfailure=e})):t.ok?Promise.resolve(t.value):Promise.reject(t.error);return Object.defineProperty(this,"promise",{value:e}),e}then(t,e){return this.activate().promise.then(t,e)}catch(t){return this.activate().promise.catch(t)}finally(t){return this.activate().promise.finally(t)}activate(){return this}}class Yr extends Vr{constructor(t,e=Xr,r={},n=Zr){super(r),this.id=++Wr,this.name=e.name||"",this.task=t,this.state=n,this.status=Kr,this.result,this.handler=r,this.controller}*resume(){Cr(this)}join(){return qr(this)}abort(t){return Mr(this,t)}exit(t){return((t,e)=>Gr(t,{ok:!0,value:e}))(this,t)}get[Symbol.toStringTag](){return"Fork"}*[Symbol.iterator](){return this.activate()}activate(){return this.controller=this.task[Symbol.iterator](),this.status=Jr,Cr(this),this}panic(t){this.result={ok:!1,error:t},this.status=Qr;const{handler:e}=this;throw e.onfailure&&e.onfailure(t),t}step(t){if(this.state=t,t.done){this.result={ok:!0,value:t.value},this.status=Qr;const{handler:e}=this;e.onsuccess&&e.onsuccess(t.value)}return t}next(t){try{return this.step(this.controller.next(t))}catch(t){return this.panic(t)}}return(t){try{return this.step(this.controller.return(t))}catch(t){return this.panic(t)}}throw(t){try{return this.step(this.controller.throw(t))}catch(t){return this.panic(t)}}}let Wr=0;const Kr="idle",Jr="active",Qr="finished",Zr={done:!1,value:Dr},Xr={},tn=function*(){}(),en=new class{constructor(){this.status=Kr,this.stack=new zr,this.id=0}};function rn(){}Object.defineProperties(rn,{prototype:{value:new Proxy(Object.prototype,{get:(t,e,r)=>"symbol"==typeof e?Reflect.get(t,e,r):r.get(e)})}});const nn=()=>new an,on=(t,e=0,r=t.byteLength)=>{const n=[],o=e<0?t.byteLength-e:e,i=r<0?t.byteLength-r:r;if(0===o&&i>=t.byteLength)return t;if(o>i||o>t.byteLength||i<=0)return nn();let a=0,s=0;for(const e of t.segments){const t=s+e.byteLength;if(0===a){if(i<=t){const t=e.subarray(o-s,i-s);n.push(t),a=t.byteLength;break}if(o<t){const t=o===s?e:e.subarray(o-s);n.push(t),a=t.byteLength}}else{if(i<=t){const r=i===t?e:e.subarray(0,i-s);n.push(r),a+=r.byteLength;break}n.push(e),a+=e.byteLength}s=t}return new an(n,t.byteOffset+o,a)};class an extends rn{constructor(t=[],e=0,r=0){super(),this.segments=t,this.byteLength=r,this.length=r,this.byteOffset=e}[Symbol.iterator](){return function*(t){for(const e of t.segments)yield*e}(this)}slice(t,e){return on(this,t,e)}subarray(t,e){return on(this,t,e)}push(t){return((t,e)=>e.byteLength>0?(t.segments.push(e),new an(t.segments,t.byteOffset,t.byteLength+e.byteLength)):t)(this,t)}get(t){return((t,e)=>{if(e<t.byteLength){let r=0;for(const n of t.segments){if(e<r+n.byteLength)return n[e-r];r+=n.byteLength}}})(this,t)}copyTo(t,e){return((t,e,r)=>{let n=r;for(const r of t.segments)e.set(r,n),n+=r.byteLength;return e})(this,t,e)}}const sn=t=>{throw new Error(t)},un=(t,e,...r)=>sn(String.raw(t,JSON.stringify(e),...r)),cn=new Uint8Array(0),ln=[],fn=t=>({config:t,buffer:nn()}),hn=(t,e,r)=>{const n=t.chunker,o=[];let i=0;for(const t of n.cut(n.context,e,r))if(t>0){const r=e.subarray(i,i+t);o.push(r),i+=t}return{config:t,chunks:o,buffer:e.subarray(i)}},pn=(t,e)=>{let r=yn(e,{});for(const e of t){const{ready:t,has:n,wants:o}=mn(e.children,r.links);r=0===o.length?yn(r,{links:gn(void 0,n),linked:[{id:e.id,links:t}]}):yn(r,{needs:gn(e.id,o),nodes:{[e.id]:{children:e.children,count:o.length}}})}return r},dn=(t,e,r)=>{const n=r.needs[t],o=r.nodes[n];if(null!=o){if(1===o.count){const{ready:i,has:a}=mn(o.children,{...r.links,[t]:e});return yn(r,{needs:{[t]:void 0},links:gn(void 0,a),nodes:{[n]:void 0},linked:[{id:n,links:i}]})}return yn(r,{needs:{[t]:void 0},links:{[t]:e},nodes:{[n]:{...o,count:o.count-1}}})}return yn(r,{links:{[t]:e}})},yn=(t,{needs:e,nodes:r,links:n,linked:o})=>{const i=t.mutable?t:{...t},a=t.mutable?kn:void 0;return e&&(i.needs=vn(t.needs,e,a)),r&&(i.nodes=vn(t.nodes,r,a)),n&&(i.links=vn(t.links,n,a)),i.linked=o?bn(t.linked||wn,o,wn):t.linked||[],i},gn=(t,e)=>{const r={};for(const n of e)r[n]=t;return r},vn=(t,e,r=t)=>{const n=t===r?{...t}:t;for(const t of Object.entries(e)){const[e,r]=t;null==r?delete n[e]:n[e]=r}return n},bn=(t,e,r=t)=>{if(t===r)return[...t,...e];for(const r of e)t.push(r);return t},mn=(t,e)=>{const r=[],n=[],o=[];for(const i of t){const t=e[i];t?(r.push(i),o.push(t)):n.push(i)}return{has:r,wants:n,ready:o}},wn=Object.freeze([]),kn=Object.freeze({}),En=(t,e)=>{switch(t.type){case"write":return xn(e,t.bytes);case"link":return _n(e,t.link);case"block":case"end":return{state:e,effect:Rr()};case"close":return Sn(e);default:return un`File Writer got unknown message ${t}`}},xn=(t,e)=>{if("open"===t.status){const{chunks:r,...n}=((t,e)=>e.byteLength>0?hn(t.config,t.buffer.push(e),!1):{...t,chunks:ln})(t.chunker,e),{nodes:o,leaves:i,layout:a}=t.config.fileLayout.write(t.layout,r),{linked:s,...u}=pn(o,t.nodeQueue),c=[...Ln(i,t.config),...An(s,t.config)];return{state:{...t,chunker:n,layout:a,nodeQueue:u},effect:Or({link:Ar(c)})}}return sn("Unable to perform write on closed file")},_n=(t,{id:e,link:r,block:n})=>{let{linked:o,...i}=dn(e,r,t.nodeQueue);const a=An(o,t.config),s="closed"===t.status&&e===t.rootID?{...t,status:"linked",link:r,nodeQueue:i}:{...t,nodeQueue:i},u="closed"===t.status&&e===t.rootID&&t.end?t.end.resume():Rr();return{state:s,effect:Or({link:Ar(a),block:Tn(t.writer,n),end:u})}},Sn=t=>{if("open"===t.status){const{chunks:e}=(t=>hn(t.config,t.buffer,!0))(t.chunker),{layout:r,...n}=t.config.fileLayout.write(t.layout,e),{root:o,...i}=t.config.fileLayout.close(r,t.metadata),[a,s]=jn(o)?[[...n.nodes,...i.nodes],[...n.leaves,...i.leaves,o]]:[[...n.nodes,...i.nodes,o],[...n.leaves,...i.leaves]],{linked:u,...c}=pn(a,t.nodeQueue),l=[...Ln(s,t.config),...An(u,t.config)],f=Br(xr());return{state:{...t,chunker:null,layout:null,rootID:o.id,status:"closed",end:f,nodeQueue:c},effect:Or({link:Ar(l),end:qr(f)})}}return{state:t,effect:Rr()}},Ln=(t,e)=>t.map((t=>On(e,t,e.fileChunkEncoder))),On=function*({hasher:t,linker:e},{id:r,content:n},o){const i=o.encode(n?Rn(n):cn),a=yield*_r(t.digest(i)),s=e.createLink(o.code,a);return{id:r,block:{cid:s,bytes:i},link:{cid:s,contentByteLength:n?n.byteLength:0,dagByteLength:i.byteLength}}},An=(t,e)=>t.map((t=>In(e,t))),In=function*(t,{id:e,links:r},n){const o=t.fileEncoder.encode({type:Ee.File,layout:"advanced",parts:r,metadata:n}),i=yield*_r(Promise.resolve(t.hasher.digest(o))),a=t.linker.createLink(t.fileEncoder.code,i);return{id:e,block:{bytes:o,cid:a},link:{cid:a,contentByteLength:ar(r),dagByteLength:sr(o,r)}}},Tn=function*(t,e){(t.desiredSize||0)<=0&&(yield*_r(t.ready)),t.write(e)},Rn=t=>t instanceof Uint8Array?t:t.copyTo(new Uint8Array(t.byteLength),0),jn=t=>null==t.children,Dn="fixed",Pn={maxChunkSize:262144},Nn="Stateless",zn=t=>({type:"Stateless",context:{maxChunkSize:t},name:Dn,cut:Fn}),Fn=({maxChunkSize:t},{byteLength:e},r)=>{const n=e/t|0,o=new Array(n).fill(t),i=r?e-n*t:0;return i>0&&o.push(i),o};function Cn({name:t,code:e,encode:r}){return new Un(t,e,r)}class Un{name;code;encode;constructor(t,e,r){this.name=t,this.code=e,this.encode=r}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?Ft(this.code,e):e.then((t=>Ft(this.code,t)))}throw Error("Unknown type, must be binary type")}}function Bn(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}const Mn=Cn({name:"sha2-256",code:18,encode:Bn("SHA-256")});Cn({name:"sha2-512",code:19,encode:Bn("SHA-512")});class Gn{constructor(t,e,r){this.id=t,this.children=e,this.metadata=r}}const Hn={width:174},$n=({width:t}=Hn)=>({width:t,head:null,leafIndex:[],nodeIndex:[],lastID:0}),qn=(t,e)=>{if(0===e.length)return{layout:t,nodes:Kn,leaves:Kn};{let{lastID:r}=t;const[n,o]=t.head?[null,(e.unshift(t.head),e)]:1===e.length&&0===t.leafIndex.length?[e[0],Kn]:[null,e];if(0===o.length)return{layout:{...t,head:n},nodes:Kn,leaves:Kn};{const e=[...t.leafIndex],i=[];for(const t of o){const n={id:++r,content:t};i.push(n),e.push(n.id)}return e.length>t.width?Vn({...t,leafIndex:e,head:n,lastID:r},i):{layout:{...t,head:n,leafIndex:e,lastID:r},leaves:i,nodes:Kn}}}},Vn=(t,e=Kn,r=[],n=!1)=>{let{lastID:o}=t;const i=t.nodeIndex.map((t=>[...t])),a=[...t.leafIndex],{width:s}=t;for(;a.length>s||a.length>0&&n;){Wn(i,1);const t=new Gn(++o,a.splice(0,s));i[0].push(t.id),r.push(t)}let u=0;for(;u<i.length;){const t=i[u];for(u++;t.length>s||t.length>0&&n&&u<i.length;){const e=new Gn(++o,t.splice(0,s));Wn(i,u+1),i[u].push(e.id),r.push(e)}}return{layout:{...t,lastID:o,leafIndex:a,nodeIndex:i},leaves:e,nodes:r}},Yn=(t,e)=>{const r=t;if(t.head)return{root:{id:1,content:t.head,metadata:e},leaves:Kn,nodes:Kn};if(0===t.leafIndex.length)return{root:{id:1,metadata:e},leaves:Kn,nodes:Kn};{const{nodes:t,layout:n}=Vn(r,Kn,[],!0),{nodeIndex:o}=n,i=o[o.length-1];if(1===i.length){const e=t[t.length-1];return t.length=t.length-1,{root:e,nodes:t,leaves:Kn}}return{root:new Gn(n.lastID+1,i,e),nodes:t,leaves:Kn}}},Wn=(t,e)=>{for(;t.length<e;)t.push([]);return t},Kn=[],Jn=()=>{return{chunker:e,fileChunkEncoder:Zn,smallFileEncoder:Zn,fileEncoder:t,fileLayout:(r=174,{open:()=>$n({width:r}),write:qn,close:Yn}),hasher:Mn,linker:{createLink:Gt.createV1}};var r},Qn=t=>({...Jn(),...t}),Zn={code:Ae,name:Ie,encode:He},Xn=({writer:t,metadata:e={},settings:r=Jn()})=>new eo(((t,e,r)=>({status:"open",metadata:e,config:r,writer:t,chunker:fn({chunker:r.chunker}),layout:r.fileLayout.open(),nodeQueue:{mutable:!0,needs:{},nodes:{},links:{},linked:wn}}))(t,e,Qn(r))),to=(t,e)=>Br(function*(t,e){const r=yield*Er(),n=new Nr(r);for(Nr.enqueue(t[Symbol.iterator](),n);;){for(const t of Ur(n))Nr.enqueue(e(t)[Symbol.iterator](),n);if(!(zr.size(n.stack)>0))break;yield*xr()}}(e,(e=>{const{state:r,effect:n}=En(e,t.state);return t.state=r,n})));class eo{constructor(t){this.state=t}get writer(){return this.state.writer}get settings(){return this.state.config}write(t){return(async(t,e)=>(await to(t,Lr({type:"write",bytes:e})),t))(this,t)}close(t){return(async(t,{releaseLock:e=!1,closeWriter:r=!1}={})=>{await to(t,Lr({type:"close"}));const{state:n}=t;if("linked"===n.status)return r?await t.state.writer.close():e&&t.state.writer.releaseLock(),n.link;sn(`Expected writer to be in 'linked' state after close, but it is in "${n.status}" instead`)})(this,t)}}const ro=Jn,no=({writer:t,settings:e=ro(),metadata:r={}})=>new uo({writer:t,metadata:r,settings:e,entries:new Map,closed:!1}),oo=(t,e,r,{overwrite:n=!1}={})=>{const o=ao(t.state);if(e.includes("/"))throw new Error(`Directory entry name "${e}" contains forbidden "/" character`);if(!n&&o.entries.has(e))throw new Error(`Directory already contains entry with name "${e}"`);return o.entries.set(e,r),t},io=(t,e)=>(ao(t.state).entries.delete(e),t),ao=t=>{if(t.closed)throw new Error("Can not change written directory, but you can .fork() and make changes to it");return t},so=function*({state:t}){for(const[e,{dagByteLength:r,cid:n}]of t.entries)yield{name:e,dagByteLength:r,cid:n}};class uo{constructor(t){this.state=t}get writer(){return this.state.writer}get settings(){return this.state.settings}links(){return so(this)}set(t,e,r){return oo(this,t,e,r)}remove(t){return io(this,t)}fork(t){return(({state:t},{writer:e=t.writer,metadata:r=t.metadata,settings:n=t.settings}={})=>new uo({writer:e,metadata:r,settings:n,entries:new Map(t.entries.entries()),closed:!1}))(this,t)}close(t){return(async(t,{closeWriter:e=!1,releaseLock:r=!1}={})=>{const{writer:n,settings:o,metadata:i}=ao(t.state);t.state.closed=!0;const a=[...so(t)],s=Ce(a,i),u=Ke(s),c=await o.hasher.digest(u),l=o.linker.createLink(Ae,c);return(n.desiredSize||0)<=0&&await n.ready,n.write({cid:l,bytes:u}),e?await n.close():r&&n.releaseLock(),{cid:l,dagByteLength:sr(u,a)}})(this,t)}entries(){return this.state.entries.entries()}has(t){return this.state.entries.has(t)}get size(){return this.state.entries.size}}const co=(t=32)=>{if(32!==t)throw new Error(`Uint32 BitField does not support size: ${t}`);return 0},lo=(t,e)=>{let r=co(e);for(const e of t)r=po(r,e);return r},fo=t=>32,ho=(t,e=31)=>vo(t&((t,e)=>1<<((t,e)=>t>>>e&31)(t,e))(e,0)-1),po=(t,e)=>t|1<<e,yo=(t,e)=>t&(255^1<<e),go=(t,e)=>!!(t>>e&1),vo=t=>{const e=t-(t>>1&1431655765),r=(858993459&e)+(e>>2&858993459);return 16843009*(r+(r>>4)&252645135)>>24},bo=(t,e)=>t&e,mo=(t,e)=>t|e,wo=t=>Uint8Array.of(t>>24&255,t>>16&255,t>>8&255,255&t),ko=t=>{if(4!==t.length)throw new Error(`Expected 4 bytes instead got ${t.length}`);return(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3]};var Eo=__webpack_require__(437);const xo=new TextEncoder,_o=Eo.x64.hash126,So=({bitWidth:t=5,hash:e=_o})=>{if(t>32)throw new RangeError(`Can not use bitWidth ${t} which exceeds the hashSize 4`);const r=4294967295>>>32-t;return{at:(e,n)=>e>>>n*t&r,from:t=>e(xo.encode(t)),size:Math.ceil(32/t)}};class Lo{constructor(t,e,r,n,o){this.edit=t,this.config=o,this.datamap=e,this.nodemap=r,this.children=n}get nodeArity(){return this.config.BitField.popcount(this.nodemap)}get dataArity(){return this.config.BitField.popcount(this.datamap)}empty(){return Do(this.config)}lookup(t,e,r,n){return No(this,t,e,r,n)}associate(t,e,r,n,o,i){return Fo(this,t,e,r,n,o,i)}dissociate(t,e,r,n,o){return Uo(this,t,e,r,n,o)}fork(t=null){return Mo(this,t)}entries(){return Bo(this)}keys(){return Go(this)}values(){return Ho(this)}}class Oo{constructor(t,e,r,n){this.edit=t,this.count=e,this.children=r,this.config=n}get nodeArity(){return 0}get dataArity(){return this.count}lookup(t,e,r,n){return Ao(this,r,n)}associate(t,e,r,n,o,i){return Io(this,t,r,n,o,i)}dissociate(t,e,r,n,o){return To(this,t,r,n,o)}fork(t=null){return Ro(this,t)}entries(){return Bo(this)}keys(){return Go(this)}values(){return Ho(this)}}const Ao=(t,e,r)=>{const{children:n,count:o}=t,i=jo(n,o,e);return n[i]===e?n[i+1]:r},Io=(t,e,r,n,o,i)=>{const{children:a,count:s}=t,u=jo(a,s,n);if(a[u]!==n){const n=t.fork(e);return i.value=!0,n.count+=1,n.children.splice(u,r,o),n}if(a[u+1]!==o){const r=t.fork(e);return r.children[u+1]=o,r}return t},To=(t,e,r,n,o)=>{const{children:i,count:a,config:s}=t,u=jo(i,a,n);if(i[u]!==n)return t;if(o.value=!0,2===a){const t=0===u?2:0;return Fo(Do(s),e,0,r,i[t],i[t+1],o)}{const r=t.fork(e);return r.children.splice(u,2),r.count-=1,r}},Ro=(t,e=null)=>ei(t.edit,e)?t:new Oo(e,t.count,t.children.slice(),t.config),jo=(t,e,r)=>{let n=0;for(;n<e&&t[n]>r;)n+=2;return n},Do=(t,e=null)=>new Lo(e,t.BitField.empty(Math.pow(2,t.bitWidth)),t.BitField.empty(Math.pow(2,t.bitWidth)),[],t),Po=(t,e,r)=>No(t,0,t.config.Path.from(e),e,r),No=(t,e,r,n,o)=>{const{datamap:i,nodemap:a,config:s}=t,{Path:u,BitField:c}=s,l=u.at(r,e);if(c.get(i,l)){const e=c.popcount(i,l);return Ko(t,e)===n?Qo(t,e):o}if(c.get(a,l)){return Xo(t,l).lookup(e+1,r,n,o)}return o},zo=(t,e,r,n,o)=>Fo(t,e,0,t.config.Path.from(r),r,n,o),Fo=(t,e,r,n,o,i,a)=>{const{datamap:s,nodemap:u,config:c}=t,{Path:l,BitField:f}=c,h=l.at(n,r);if(f.get(s,h)){const u=f.popcount(s,h),p=Ko(t,u);if(o===p)return Qo(t,u)===i?t:$o(t,e,u,i);{const s=Wo(c,e,r+1,l.from(p),p,Qo(t,u),n,o,i);return a.value=!0,Yo(t,e,h,s)}}if(f.get(u,h)){const s=Xo(t,h),u=s.associate(e,r+1,n,o,i,a);return s===u?t:Vo(t,e,h,u)}{const r=f.popcount(s,h);a.value=!0;const n=t.fork(e);return n.datamap=f.set(s,h),n.children.splice(Jo(r),0,o,i),n}},Co=(t,e,r,n)=>Uo(t,e,0,t.config.Path.from(r),r,n),Uo=(t,e,r,n,o,i)=>{const{datamap:a,nodemap:s,config:u}=t,{BitField:c,Path:l}=u,f=l.at(n,r);if(c.get(a,f)){const r=c.popcount(a,f);if(o===Ko(t,r)){i.value=!0;const n=Mo(t,e);return n.datamap=c.unset(t.datamap,f),n.children.splice(Jo(r),2),n}return t}if(c.get(s,f)){const a=Xo(t,f),s=a.dissociate(e,r+1,n,o,i);return ri(s)?ni(t)?s:qo(t,e,f,s):a===s?t:Vo(t,e,f,s)}return t},Bo=function*({children:t}){let e=0;const r=t.length;for(;e<r;){const r=t[e];if("string"!=typeof r)break;{e+=1;const n=t[e];yield[r,n],e+=1}}for(;e<r;){const r=t[e];yield*r.entries(),e+=1}},Mo=(t,e)=>{if(ei(t.edit,e))return t;return new Lo(e,t.datamap,t.nodemap,t.children.slice(),t.config)},Go=function*({children:t}){let e=0;const r=t.length;for(;e<r;){const r=t[e];if("string"!=typeof r)break;yield r,e+=2}for(;e<r;){const r=t[e];yield*r.keys(),e+=1}},Ho=function*({children:t}){let e=0;const r=t.length;for(;e<r;){if("string"!=typeof t[e])break;e+=1,yield t[e],e+=1}for(;e<r;){const r=t[e];yield*r.values(),e+=1}},$o=(t,e,r,n)=>{const o=t.fork(e);return o.children[Zo(r)]=n,o},qo=(t,e,r,n)=>{const{datamap:o,nodemap:i,config:a}=t,{BitField:s}=a,u=Mo(t,e);return u.children.splice(ti(t,r),1),u.children.splice(Jo(s.popcount(o,r)),0,n.children[0],n.children[1]),u.datamap=s.set(o,r),u.nodemap=s.unset(i,r),u},Vo=(t,e,r,n)=>{const o=Mo(t,e);return o.children[ti(t,r)]=n,o},Yo=(t,e,r,n)=>{const{nodemap:o,datamap:i,config:a}=t,{BitField:s}=a,u=s.popcount(i,r),c=Jo(u),l=ti(t,r),f=Mo(t,e);return f.datamap=s.unset(i,r),f.children.splice(c,2),f.nodemap=s.set(o,r),f.children.splice(l-1,0,n),f},Wo=(t,e,r,n,o,i,a,s,u)=>{const{BitField:c,Path:l}=t;if(l.size<r)return new Oo(e,2,[o,i,s,u],t);{const f=l.at(n,r),h=l.at(a,r);return f===h?new Lo(e,c.empty(Math.pow(2,t.bitWidth)),c.from([f],Math.pow(2,t.bitWidth)),[Wo(t,e,r+1,n,o,i,a,s,u)],t):new Lo(e,c.from([f,h],Math.pow(2,t.bitWidth)),c.empty(Math.pow(2,t.bitWidth)),f<h?[o,i,s,u]:[s,u,o,i],t)}},Ko=({children:t},e)=>t[Jo(e)],Jo=t=>2*t,Qo=({children:t},e)=>t[Zo(e)],Zo=t=>2*t+1,Xo=(t,e)=>t.children[ti(t,e)],ti=({children:t,nodemap:e,config:r},n)=>t.length-1-r.BitField.popcount(e,n),ei=(t,e)=>null!=t&&t===e,ri=t=>0===t.nodeArity&&1===t.dataArity,ni=({config:{BitField:t},datamap:e,nodemap:r})=>0===t.popcount(e)&&1===t.popcount(r);Cn({name:"murmur3-32",code:35,encode:t=>function(t){const e=new Array(4);for(let r=0;r<4;r++)e[r]=255&t,t>>=8;return new Uint8Array(e)}(Eo.x86.hash32(t))}),Cn({name:"murmur3-128",code:34,encode:t=>rt(Eo.x64.hash128(t))});const oi=Cn({name:"murmur3-x64-64",code:34,encode:t=>rt(Eo.x64.hash128(t)).subarray(0,8)}),ii=new TextEncoder,ai=t=>oi.encode(t),si=({bitWidth:t=8,hash:e=ai}={})=>{const r=e(new Uint8Array).byteLength;return{from:t=>e(ii.encode(t)),at:(e,n)=>{const o=n*t;if(o>r)throw new RangeError("Out of bounds");return ui(e,o,t)},size:Math.ceil(8*r/t)}},ui=(t,e,r)=>{let n=e/8|0,o=e%8,i=r,a=0;for(;i>0&&n<t.byteLength;){const e=8-o,r=e<i?e:i;a=(a<<r)+((255>>o&t[n])>>8-o-r),i-=r,n++,o=0}return a},ci=(t=256)=>{if(t%8!=0)throw new Error("Must be multiple of 8");return new Uint8Array(t/8)},li=(t,e)=>{let r=ci(e);for(const e of t){const{byte:t,byteOffset:n,bitOffset:o}=hi(r,e);r[n]=t|1<<o}return r},fi=t=>8*t.byteLength,hi=(t,e)=>{const r=t.byteLength-1-(e/8|0),n=e%8;return{byte:t[r],byteOffset:r,bitOffset:n}},pi=(t,e,r)=>{if(t[e]!==r){const n=t.slice(0);return n[e]=r,n}return t},di=(t,e)=>{const{byte:r,byteOffset:n,bitOffset:o}=hi(t,e);return pi(t,n,r|1<<o)},yi=(t,e)=>{const{byte:r,byteOffset:n,bitOffset:o}=hi(t,e);return pi(t,n,r&(255^1<<o))},gi=(t,e)=>{var{byte:r,bitOffset:n}=hi(t,e);return!!(r>>n&1)},vi=t=>t,bi=t=>t,mi=(t,e=8*t.byteLength)=>{const{byteOffset:r,bitOffset:n,byte:o}=hi(t,e);let i=ho(o,n),a=t.byteLength-1;for(;a>r;){const e=t[a];i+=vo(e),a--}return i},wi=(t,e)=>{const r=t.slice();let n=0;for(;n<t.length;)r[n]|=e[n],n++;return r},ki=(t,e)=>{const r=t.slice();let n=0;for(;n<t.length;)r[n]&=e[n],n++;return r},Ei=new RangeError("Not Found"),xi=({bitWidth:t=5,BitField:e=(5===t?n:i),Path:r=(5===t?So({bitWidth:t}):si({bitWidth:t}))}={})=>({bitWidth:t,BitField:e,Path:r}),_i=(t,e)=>Po(t.root,e,Ei)!==Ei,Si=t=>{const e={},r=xi(t);return new Oi(e,0,Do(r,e),r)};class Li{constructor(t=0,e,r){this.count=t,this.root=e,this.config=r}get size(){return this.count}clone(){return new Li(this.count,this.root,this.config)}empty(){return new Li(0,Do(this.config,null),this.config)}has(t){return _i(this,t)}get(t){return Po(this.root,t,void 0)}set(t,e){const r={value:!1},n=zo(this.root,null,t,e,r);return n===this.root?this:new Li(r.value?this.count+1:this.count,n,this.config)}delete(t){const e=Co(this.root,null,t,{value:!1});return e===this.root?this:new Li(this.count-1,e,this.config)}get bitField(){return this.config.BitField.or(this.root.datamap,this.root.nodemap)}[Symbol.iterator](){return this.entries()}entries(){return this.root.entries()}keys(){return this.root.keys()}values(){return this.root.values()}createBuilder(){return new Oi({},this.count,this.root,this.config)}}class Oi{constructor(t,e,r,n){this.edit=t,this.count=e,this.root=r,this.config=n}get size(){if(this.edit)return this.count;throw new Error(".size was accessed on the finalized builder")}set(t,e){if(this.edit){const r={value:!1},n=zo(this.root,this.edit,t,e,r);return this.root!==n&&(this.root=n),r.value&&(this.count+=1),this}throw new Error(".set was called on the finalized builder")}delete(t){if(this.edit){if(0===this.count)return this;const e={value:!1},r=Co(this.root,this.edit,t,e);return r!==this.root&&(this.root=r),e.value&&(this.count-=1),this}throw new Error(".delete was called on the finalized builder")}build(){if(this.edit)return this.edit=null,new Li(this.count,this.root,this.config);throw new Error(".build was called on the finalized builder")}}const Ai=new TextEncoder,Ii=t=>oi.encode(t),Ti=(t,e=0,{bitWidth:r=8,hash:n,hashSize:o})=>{const i=8*o;let a=0,s=r,u=r*e;for(;s>0;){const e=u/i|0,r=n(0===e?t:Ri(t,e)),o=i<=u?u%i:u,c=i-o,l=c<s?c:s;a=(a<<l)+ui(r,o,l),s-=l,u+=l}return a},Ri=(t,e)=>{const r=new Uint8Array(t.byteLength+1).fill(e,t.byteLength);return r.set(t),r},ji={bitWidth:8,Path:(({bitWidth:t=8,hash:e=Ii})=>{const r=e(new Uint8Array).byteLength,n={bitWidth:t,hash:e,hashSize:r};return{at:(t,e)=>Ti(t,e,n),from:t=>Ai.encode(t),size:1/0}})({bitWidth:8})},Di=(t=ji)=>Si(t),Pi=(t,e=ji)=>((t,e)=>{const r=Si(e);for(const[e,n]of t)r.set(e,n);return r.build()})(t,e),Ni=t=>{let e=0;for(;e<t.byteLength;){if(0!==t[e])return t.subarray(e);e+=1}return t.subarray(e)};function zi({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*Fi(t,e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))for(const[r,n]of e.entries()){const e=[...t,r],o=Gt.asCID(n);null!=o?yield[e.join("/"),o]:"object"==typeof n&&(yield*Ci(n,e))}else{const r=Gt.asCID(e);null!=r?yield[t.join("/"),r]:yield*Ci(e,t)}}function*Ci(t,e){if(null==t||t instanceof Uint8Array)return;const r=Gt.asCID(t);null!=r&&(yield[e.join("/"),r]);for(const[r,n]of Object.entries(t)){const t=[...e,r];yield*Fi(t,n)}}function*Ui(t,e){if(Array.isArray(e))for(const[r,n]of e.entries()){const e=[...t,r];yield e.join("/"),"object"==typeof n&&null==Gt.asCID(n)&&(yield*Bi(n,e))}else yield*Bi(e,t)}function*Bi(t,e){if(null!=t&&"object"==typeof t)for(const[r,n]of Object.entries(t)){const t=[...e,r];yield t.join("/"),null==n||n instanceof Uint8Array||"object"!=typeof n||null!=Gt.asCID(n)||(yield*Ui(t,n))}}class Mi{cid;bytes;value;asBlock;constructor({cid:t,bytes:e,value:r}){if(null==t||null==e||void 0===r)throw new Error("Missing required argument");this.cid=t,this.bytes=e,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:zi(),bytes:zi(),value:zi(),asBlock:zi()})}links(){return Ci(this.value,[])}tree(){return Bi(this.value,[])}get(t="/"){return function(t,e){let r=t;for(const[t,n]of e.entries()){if(r=r[n],null==r)throw new Error(`Object has no property at ${e.slice(0,t+1).map((t=>`[${JSON.stringify(t)}]`)).join("")}`);const o=Gt.asCID(r);if(null!=o)return{value:o,remaining:e.slice(t+1).join("/")}}return{value:r}}(this.value,t.split("/").filter(Boolean))}}const Gi=Jn,Hi=async(t,{closeWriter:e=!1,releaseLock:r=!1}={})=>{const{writer:n,settings:o,metadata:i}=(t=>{if(t.closed)throw new Error("Can not change written HAMT directory, but you can .fork() and make changes to it");return t})(t.state);t.state.closed=!0;const{entries:a}=t.state;if(!(a instanceof Vi))throw new Error(`not a HAMT: ${a}`);const s=a.builder.build(),u=$i(s,s.root,o);let c=null;for await(const t of u)c=t,(n.desiredSize||0)<=0&&await n.ready,n.write(t);if(null==c)throw new Error("no root block yielded");return e?await n.close():r&&n.releaseLock(),{cid:c.cid,dagByteLength:sr(c.bytes,c.value.entries)}},$i=async function*(t,e,r){const n=[];for(const o of function*(t){const{config:e,datamap:r,nodemap:n}=t,{BitField:o}=e,i=o.size(r);let a=0,s=0;for(;a<i;){const e=a.toString(16).toUpperCase().padStart(2,"0");if(o.get(r,a)){const r=Ko(t,s);yield{prefix:e,key:r,value:Qo(t,s)},s++}else o.get(n,a)&&(yield{prefix:e,node:Xo(t,a)});a++}}(e))if("key"in o)n.push({name:`${o.prefix??""}${o.key??""}`,dagByteLength:o.value.dagByteLength,cid:o.value.cid});else{let e=null;for await(const n of $i(t,o.node,r))yield n,e=n;if(null==e)throw new Error("no root block yielded");n.push({name:o.prefix,dagByteLength:sr(e.bytes,e.value.entries),cid:e.cid})}const o=Be(n,(({datamap:t,nodemap:e,config:{BitField:r}})=>Ni(r.toBytes(r.or(t,e))))(e),(t=>Math.pow(2,t.config.bitWidth))(t),oi.code);yield await async function(t,e){const r=Je(t),n=await e.hasher.digest(r),o=e.linker.createLink(112,n);return new Mi({cid:o,bytes:r,value:t})}(o,r)};class qi{constructor(t){this.state=t}get writer(){return this.state.writer}get settings(){return this.state.settings}set(t,e,r){return oo(this,t,e,r)}remove(t){return io(this,t)}fork(t){return(({state:t},{writer:e=t.writer,metadata:r=t.metadata,settings:n=t.settings}={})=>new qi({writer:e,metadata:r,settings:n,entries:new Vi(Pi(t.entries.entries()).createBuilder()),closed:!1}))(this,t)}close(t){return Hi(this,t)}entries(){return this.state.entries.entries()}has(t){return this.state.entries.has(t)}get size(){return this.state.entries.size}}class Vi extends Map{constructor(t=Di()){super(),this.builder=t}clear(){this.builder=Di()}delete(t){const{root:e}=this.builder;return this.builder.delete(t),this.builder.root!==e}forEach(t,e=this){for(const[r,n]of this.builder.root.entries())t.call(e,n,r,this)}get(t){return((t,e,r)=>Po(t.root,e,r))(this.builder,t)}has(t){return _i(this.builder,t)}set(t,e){return this.builder.set(t,e),this}get size(){return this.builder.size}[Symbol.iterator](){return this.builder.root.entries()}entries(){return this.builder.root.entries()}keys(){return this.builder.root.keys()}values(){return this.builder.root.values()}}class Yi{constructor({writer:t,settings:e}){this.writer=t,this.settings=Qn(e)}createFileWriter({settings:t=this.settings,metadata:e}={}){return Xn({writer:this.writer,settings:t,metadata:e})}createDirectoryWriter({settings:t=this.settings,metadata:e}={}){return no({writer:this.writer,settings:t,metadata:e})}close(t){return(async(t,{releaseLock:e=!0,closeWriter:r=!0}={})=>(r?await t.writer.close():e&&t.writer.releaseLock(),t))(this,t)}}const Wi="raw",Ki=85;function Ji(t){return nt(t)}function Qi(t){return nt(t)}const Zi=((t=104857600)=>({highWaterMark:t,size:t=>t.bytes.length}))(),Xi=Qn({fileChunkEncoder:a,smallFileEncoder:a});class ta{#t;constructor(t){this.#t=t}async finalize(t){const e=Xn(t);return await this.#t.stream().pipeTo(new WritableStream({async write(t){await e.write(t)}})),e.close()}}class ea{entries=new Map;async finalize(t){const e=this.entries.size<=1e3?no(t):(({writer:t,settings:e=Gi(),metadata:r={}})=>new qi({writer:t,metadata:r,settings:e,entries:new Vi,closed:!1}))(t);for(const[r,n]of this.entries){const o=await n.finalize(t);e.set(r,o)}return e.close()}}function ra(t,e=Xi){const r=new ea;for(const e of t){const t=e.name.split("/");""!==t[0]&&"."!==t[0]||t.shift();let n=r;for(const[r,o]of t.entries()){if(r===t.length-1){n.entries.set(o,new ta(e));break}let i=n.entries.get(o);if(null==i&&(i=new ea,n.entries.set(o,i)),!(i instanceof ea))throw new Error(`"${o}" cannot be a file and a directory`);n=i}}const{readable:n,writable:o}=new TransformStream({},Zi),i=(({writable:t,settings:e=Jn()})=>new Yi({writer:t.getWriter(),settings:e}))({writable:o,settings:e});return(async()=>{await r.finalize(i),await i.close()})(),n}var na=__webpack_require__(203);const oa=["string","number","bigint","symbol"],ia=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function aa(t){if(null===t)return"null";if(void 0===t)return"undefined";if(!0===t||!1===t)return"boolean";const e=typeof t;if(oa.includes(e))return e;if("function"===e)return"Function";if(Array.isArray(t))return"Array";if(function(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}(t))return"Buffer";const r=function(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(ia.includes(e))return e;return}(t);return r||"Object"}class sa{constructor(t,e,r){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}sa.uint=new sa(0,"uint",!0),sa.negint=new sa(1,"negint",!0),sa.bytes=new sa(2,"bytes",!0),sa.string=new sa(3,"string",!0),sa.array=new sa(4,"array",!1),sa.map=new sa(5,"map",!1),sa.tag=new sa(6,"tag",!1),sa.float=new sa(7,"float",!0),sa.false=new sa(7,"false",!0),sa.true=new sa(7,"true",!0),sa.null=new sa(7,"null",!0),sa.undefined=new sa(7,"undefined",!0),sa.break=new sa(7,"break",!0);class ua{constructor(t,e,r){this.type=t,this.value=e,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const ca=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,la=new TextDecoder,fa=new TextEncoder;function ha(t){return ca&&globalThis.Buffer.isBuffer(t)}function pa(t){return t instanceof Uint8Array?ha(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const da=ca?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):ka(t,e,r):(t,e,r)=>r-e>64?la.decode(t.subarray(e,r)):ka(t,e,r),ya=ca?t=>t.length>64?globalThis.Buffer.from(t):wa(t):t=>t.length>64?fa.encode(t):wa(t),ga=t=>Uint8Array.from(t),va=ca?(t,e,r)=>ha(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),ba=ca?(t,e)=>(t=t.map((t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t))),pa(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let e of t)n+e.length>r.length&&(e=e.subarray(0,r.length-n)),r.set(e,n),n+=e.length;return r},ma=ca?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function wa(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);o<128?e[r++]=o:o<2048?(e[r++]=o>>6|192,e[r++]=63&o|128):55296==(64512&o)&&n+1<t.length&&56320==(64512&t.charCodeAt(n+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++n)),e[r++]=o>>18|240,e[r++]=o>>12&63|128,e[r++]=o>>6&63|128,e[r++]=63&o|128):(e[r++]=o>>12|224,e[r++]=o>>6&63|128,e[r++]=63&o|128)}return e}function ka(t,e,r){const n=[];for(;e<r;){const o=t[e];let i=null,a=o>239?4:o>223?3:o>191?2:1;if(e+a<=r){let r,n,s,u;switch(a){case 1:o<128&&(i=o);break;case 2:r=t[e+1],128==(192&r)&&(u=(31&o)<<6|63&r,u>127&&(i=u));break;case 3:r=t[e+1],n=t[e+2],128==(192&r)&&128==(192&n)&&(u=(15&o)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:r=t[e+1],n=t[e+2],s=t[e+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(u=(15&o)<<18|(63&r)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),e+=a}return function(t){const e=t.length;if(e<=Ea)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Ea));return r}(n)}const Ea=4096;class xa{constructor(t=256){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const r=e.length-(this.maxCursor-this.cursor)-1;e.set(t,r)}else{if(e){const t=e.length-(this.maxCursor-this.cursor)-1;t<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,t),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=ma(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,null===this._initReuseChunk&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let e;if(1===this.chunks.length){const r=this.chunks[0];t&&this.cursor>r.length/2?(e=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=va(r,0,this.cursor)}else e=ba(this.chunks,this.cursor);return t&&this.reset(),e}}const _a="CBOR decode error:",Sa="CBOR encode error:",La=[];function Oa(t,e,r){if(t.length-e<r)throw new Error(`${_a} not enough data for type`)}La[23]=1,La[24]=2,La[25]=3,La[26]=5,La[27]=9;const Aa=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Ia(t,e,r){Oa(t,e,1);const n=t[e];if(!0===r.strict&&n<Aa[0])throw new Error(`${_a} integer encoded in more bytes than necessary (strict decode)`);return n}function Ta(t,e,r){Oa(t,e,2);const n=t[e]<<8|t[e+1];if(!0===r.strict&&n<Aa[1])throw new Error(`${_a} integer encoded in more bytes than necessary (strict decode)`);return n}function Ra(t,e,r){Oa(t,e,4);const n=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(!0===r.strict&&n<Aa[2])throw new Error(`${_a} integer encoded in more bytes than necessary (strict decode)`);return n}function ja(t,e,r){Oa(t,e,8);const n=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=16777216*t[e+4]+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(!0===r.strict&&i<Aa[3])throw new Error(`${_a} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===r.allowBigInt)return i;throw new Error(`${_a} integers outside of the safe integer range are not supported`)}function Da(t,e){return Pa(t,0,e.value)}function Pa(t,e,r){if(r<Aa[0]){const n=Number(r);t.push([e|n])}else if(r<Aa[1]){const n=Number(r);t.push([24|e,n])}else if(r<Aa[2]){const n=Number(r);t.push([25|e,n>>>8,255&n])}else if(r<Aa[3]){const n=Number(r);t.push([26|e,n>>>24&255,n>>>16&255,n>>>8&255,255&n])}else{const n=BigInt(r);if(!(n<Aa[4]))throw new Error(`${_a} encountered BigInt larger than allowable range`);{const r=[27|e,0,0,0,0,0,0,0];let o=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));r[8]=255&o,o>>=8,r[7]=255&o,o>>=8,r[6]=255&o,o>>=8,r[5]=255&o,r[4]=255&i,i>>=8,r[3]=255&i,i>>=8,r[2]=255&i,i>>=8,r[1]=255&i,t.push(r)}}}Da.encodedSize=function(t){return Pa.encodedSize(t.value)},Pa.encodedSize=function(t){return t<Aa[0]?1:t<Aa[1]?2:t<Aa[2]?3:t<Aa[3]?5:9},Da.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};const Na=BigInt(-1),za=BigInt(1);function Fa(t,e){const r=e.value,n="bigint"==typeof r?r*Na-za:-1*r-1;Pa(t,e.type.majorEncoded,n)}function Ca(t,e,r,n){Oa(t,e,r+n);const o=va(t,e+r,e+r+n);return new ua(sa.bytes,o,r+n)}function Ua(t,e,r,n){return Ca(t,e,1,r)}function Ba(t){return void 0===t.encodedBytes&&(t.encodedBytes=t.type===sa.string?ya(t.value):t.value),t.encodedBytes}function Ma(t,e){const r=Ba(e);Pa(t,e.type.majorEncoded,r.length),t.push(r)}function Ga(t,e,r,n,o){const i=r+n;Oa(t,e,i);const a=new ua(sa.string,da(t,e+r,e+i),i);return!0===o.retainStringBytes&&(a.byteValue=va(t,e+r,e+i)),a}function Ha(t,e,r,n){return Ga(t,e,1,r,n)}Fa.encodedSize=function(t){const e=t.value,r="bigint"==typeof e?e*Na-za:-1*e-1;return r<Aa[0]?1:r<Aa[1]?2:r<Aa[2]?3:r<Aa[3]?5:9},Fa.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0},Ma.encodedSize=function(t){const e=Ba(t);return Pa.encodedSize(e.length)+e.length},Ma.compareTokens=function(t,e){return r=Ba(t),n=Ba(e),r.length<n.length?-1:r.length>n.length?1:function(t,e){if(ha(t)&&ha(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}(r,n);var r,n};const $a=Ma;function qa(t,e,r,n){return new ua(sa.array,n,r)}function Va(t,e,r,n){return qa(0,0,1,r)}function Ya(t,e){Pa(t,sa.array.majorEncoded,e.value)}function Wa(t,e,r,n){return new ua(sa.map,n,r)}function Ka(t,e,r,n){return Wa(0,0,1,r)}function Ja(t,e){Pa(t,sa.map.majorEncoded,e.value)}function Qa(t,e,r,n){return new ua(sa.tag,r,1)}function Za(t,e){Pa(t,sa.tag.majorEncoded,e.value)}Ya.compareTokens=Da.compareTokens,Ya.encodedSize=function(t){return Pa.encodedSize(t.value)},Ja.compareTokens=Da.compareTokens,Ja.encodedSize=function(t){return Pa.encodedSize(t.value)},Za.compareTokens=Da.compareTokens,Za.encodedSize=function(t){return Pa.encodedSize(t.value)};const Xa=20,ts=21,es=22,rs=23;function ns(t,e,r){if(r){if(!1===r.allowNaN&&Number.isNaN(t))throw new Error(`${_a} NaN values are not supported`);if(!1===r.allowInfinity&&(t===1/0||t===-1/0))throw new Error(`${_a} Infinity values are not supported`)}return new ua(sa.float,t,e)}function os(t,e,r){const n=e.value;if(!1===n)t.push([sa.float.majorEncoded|Xa]);else if(!0===n)t.push([sa.float.majorEncoded|ts]);else if(null===n)t.push([sa.float.majorEncoded|es]);else if(void 0===n)t.push([sa.float.majorEncoded|rs]);else{let e,i=!1;r&&!0===r.float64||(us(n),e=cs(ss,1),n===e||Number.isNaN(n)?(ss[0]=249,t.push(ss.slice(0,3)),i=!0):(ls(n),e=fs(ss,1),n===e&&(ss[0]=250,t.push(ss.slice(0,5)),i=!0))),i||(o=n,as.setFloat64(0,o,!1),e=hs(ss,1),ss[0]=251,t.push(ss.slice(0,9)))}var o}os.encodedSize=function(t,e){const r=t.value;if(!1===r||!0===r||null==r)return 1;if(!e||!0!==e.float64){us(r);let t=cs(ss,1);if(r===t||Number.isNaN(r))return 3;if(ls(r),t=fs(ss,1),r===t)return 5}return 9};const is=new ArrayBuffer(9),as=new DataView(is,1),ss=new Uint8Array(is,0);function us(t){if(t===1/0)as.setUint16(0,31744,!1);else if(t===-1/0)as.setUint16(0,64512,!1);else if(Number.isNaN(t))as.setUint16(0,32256,!1);else{as.setFloat32(0,t);const e=as.getUint32(0),r=(2139095040&e)>>23,n=8388607&e;if(255===r)as.setUint16(0,31744,!1);else if(0===r)as.setUint16(0,(2147483648&t)>>16|n>>13,!1);else{const t=r-127;t<-24?as.setUint16(0,0):t<-14?as.setUint16(0,(2147483648&e)>>16|1<<24+t,!1):as.setUint16(0,(2147483648&e)>>16|t+15<<10|n>>13,!1)}}}function cs(t,e){if(t.length-e<2)throw new Error(`${_a} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;const n=r>>10&31,o=1023&r;let i;return i=0===n?o*2**-24:31!==n?(o+1024)*2**(n-25):0===o?1/0:NaN,32768&r?-i:i}function ls(t){as.setFloat32(0,t,!1)}function fs(t,e){if(t.length-e<4)throw new Error(`${_a} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function hs(t,e){if(t.length-e<8)throw new Error(`${_a} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}function ps(t,e,r){throw new Error(`${_a} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function ds(t){return()=>{throw new Error(`${_a} ${t}`)}}os.compareTokens=Da.compareTokens;const ys=[];for(let t=0;t<=23;t++)ys[t]=ps;ys[24]=function(t,e,r,n){return new ua(sa.uint,Ia(t,e+1,n),2)},ys[25]=function(t,e,r,n){return new ua(sa.uint,Ta(t,e+1,n),3)},ys[26]=function(t,e,r,n){return new ua(sa.uint,Ra(t,e+1,n),5)},ys[27]=function(t,e,r,n){return new ua(sa.uint,ja(t,e+1,n),9)},ys[28]=ps,ys[29]=ps,ys[30]=ps,ys[31]=ps;for(let t=32;t<=55;t++)ys[t]=ps;ys[56]=function(t,e,r,n){return new ua(sa.negint,-1-Ia(t,e+1,n),2)},ys[57]=function(t,e,r,n){return new ua(sa.negint,-1-Ta(t,e+1,n),3)},ys[58]=function(t,e,r,n){return new ua(sa.negint,-1-Ra(t,e+1,n),5)},ys[59]=function(t,e,r,n){const o=ja(t,e+1,n);if("bigint"!=typeof o){const t=-1-o;if(t>=Number.MIN_SAFE_INTEGER)return new ua(sa.negint,t,9)}if(!0!==n.allowBigInt)throw new Error(`${_a} integers outside of the safe integer range are not supported`);return new ua(sa.negint,Na-BigInt(o),9)},ys[60]=ps,ys[61]=ps,ys[62]=ps,ys[63]=ps;for(let t=64;t<=87;t++)ys[t]=Ua;ys[88]=function(t,e,r,n){return Ca(t,e,2,Ia(t,e+1,n))},ys[89]=function(t,e,r,n){return Ca(t,e,3,Ta(t,e+1,n))},ys[90]=function(t,e,r,n){return Ca(t,e,5,Ra(t,e+1,n))},ys[91]=function(t,e,r,n){const o=ja(t,e+1,n);if("bigint"==typeof o)throw new Error(`${_a} 64-bit integer bytes lengths not supported`);return Ca(t,e,9,o)},ys[92]=ps,ys[93]=ps,ys[94]=ps,ys[95]=ds("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)ys[t]=Ha;ys[120]=function(t,e,r,n){return Ga(t,e,2,Ia(t,e+1,n),n)},ys[121]=function(t,e,r,n){return Ga(t,e,3,Ta(t,e+1,n),n)},ys[122]=function(t,e,r,n){return Ga(t,e,5,Ra(t,e+1,n),n)},ys[123]=function(t,e,r,n){const o=ja(t,e+1,n);if("bigint"==typeof o)throw new Error(`${_a} 64-bit integer string lengths not supported`);return Ga(t,e,9,o,n)},ys[124]=ps,ys[125]=ps,ys[126]=ps,ys[127]=ds("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)ys[t]=Va;ys[152]=function(t,e,r,n){return qa(0,0,2,Ia(t,e+1,n))},ys[153]=function(t,e,r,n){return qa(0,0,3,Ta(t,e+1,n))},ys[154]=function(t,e,r,n){return qa(0,0,5,Ra(t,e+1,n))},ys[155]=function(t,e,r,n){const o=ja(t,e+1,n);if("bigint"==typeof o)throw new Error(`${_a} 64-bit integer array lengths not supported`);return qa(0,0,9,o)},ys[156]=ps,ys[157]=ps,ys[158]=ps,ys[159]=function(t,e,r,n){if(!1===n.allowIndefinite)throw new Error(`${_a} indefinite length items not allowed`);return qa(0,0,1,1/0)};for(let t=160;t<=183;t++)ys[t]=Ka;ys[184]=function(t,e,r,n){return Wa(0,0,2,Ia(t,e+1,n))},ys[185]=function(t,e,r,n){return Wa(0,0,3,Ta(t,e+1,n))},ys[186]=function(t,e,r,n){return Wa(0,0,5,Ra(t,e+1,n))},ys[187]=function(t,e,r,n){const o=ja(t,e+1,n);if("bigint"==typeof o)throw new Error(`${_a} 64-bit integer map lengths not supported`);return Wa(0,0,9,o)},ys[188]=ps,ys[189]=ps,ys[190]=ps,ys[191]=function(t,e,r,n){if(!1===n.allowIndefinite)throw new Error(`${_a} indefinite length items not allowed`);return Wa(0,0,1,1/0)};for(let t=192;t<=215;t++)ys[t]=Qa;ys[216]=function(t,e,r,n){return new ua(sa.tag,Ia(t,e+1,n),2)},ys[217]=function(t,e,r,n){return new ua(sa.tag,Ta(t,e+1,n),3)},ys[218]=function(t,e,r,n){return new ua(sa.tag,Ra(t,e+1,n),5)},ys[219]=function(t,e,r,n){return new ua(sa.tag,ja(t,e+1,n),9)},ys[220]=ps,ys[221]=ps,ys[222]=ps,ys[223]=ps;for(let t=224;t<=243;t++)ys[t]=ds("simple values are not supported");ys[244]=ps,ys[245]=ps,ys[246]=ps,ys[247]=function(t,e,r,n){if(!1===n.allowUndefined)throw new Error(`${_a} undefined values are not supported`);return!0===n.coerceUndefinedToNull?new ua(sa.null,null,1):new ua(sa.undefined,void 0,1)},ys[248]=ds("simple values are not supported"),ys[249]=function(t,e,r,n){return ns(cs(t,e+1),3,n)},ys[250]=function(t,e,r,n){return ns(fs(t,e+1),5,n)},ys[251]=function(t,e,r,n){return ns(hs(t,e+1),9,n)},ys[252]=ps,ys[253]=ps,ys[254]=ps,ys[255]=function(t,e,r,n){if(!1===n.allowIndefinite)throw new Error(`${_a} indefinite length items not allowed`);return new ua(sa.break,void 0,1)};const gs=[];for(let t=0;t<24;t++)gs[t]=new ua(sa.uint,t,1);for(let t=-1;t>=-24;t--)gs[31-t]=new ua(sa.negint,t,1);gs[64]=new ua(sa.bytes,new Uint8Array(0),1),gs[96]=new ua(sa.string,"",1),gs[128]=new ua(sa.array,0,1),gs[160]=new ua(sa.map,0,1),gs[244]=new ua(sa.false,!1,1),gs[245]=new ua(sa.true,!0,1),gs[246]=new ua(sa.null,null,1);const vs={float64:!1,mapSorter:function(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const o=r.type.major,i=bs[o].compareTokens(r,n);0===i&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return i},quickEncodeToken:function(t){switch(t.type){case sa.false:return ga([244]);case sa.true:return ga([245]);case sa.null:return ga([246]);case sa.bytes:return t.value.length?void 0:ga([64]);case sa.string:return""===t.value?ga([96]):void 0;case sa.array:return 0===t.value?ga([128]):void 0;case sa.map:return 0===t.value?ga([160]):void 0;case sa.uint:return t.value<24?ga([Number(t.value)]):void 0;case sa.negint:if(t.value>=-24)return ga([31-Number(t.value)])}}};const bs=function(){const t=[];return t[sa.uint.major]=Da,t[sa.negint.major]=Fa,t[sa.bytes.major]=Ma,t[sa.string.major]=$a,t[sa.array.major]=Ya,t[sa.map.major]=Ja,t[sa.tag.major]=Za,t[sa.float.major]=os,t}(),ms=new xa;class ws{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do{if(e.obj===t)return!0}while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${Sa} object contains circular references`);return new ws(e,t)}}const ks={null:new ua(sa.null,null),undefined:new ua(sa.undefined,void 0),true:new ua(sa.true,!0),false:new ua(sa.false,!1),emptyArray:new ua(sa.array,0),emptyMap:new ua(sa.map,0)},Es={number:(t,e,r,n)=>Number.isInteger(t)&&Number.isSafeInteger(t)?new ua(t>=0?sa.uint:sa.negint,t):new ua(sa.float,t),bigint:(t,e,r,n)=>t>=BigInt(0)?new ua(sa.uint,t):new ua(sa.negint,t),Uint8Array:(t,e,r,n)=>new ua(sa.bytes,t),string:(t,e,r,n)=>new ua(sa.string,t),boolean:(t,e,r,n)=>t?ks.true:ks.false,null:(t,e,r,n)=>ks.null,undefined:(t,e,r,n)=>ks.undefined,ArrayBuffer:(t,e,r,n)=>new ua(sa.bytes,new Uint8Array(t)),DataView:(t,e,r,n)=>new ua(sa.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),Array(t,e,r,n){if(!t.length)return!0===r.addBreakTokens?[ks.emptyArray,new ua(sa.break)]:ks.emptyArray;n=ws.createCheck(n,t);const o=[];let i=0;for(const e of t)o[i++]=xs(e,r,n);return r.addBreakTokens?[new ua(sa.array,t.length),o,new ua(sa.break)]:[new ua(sa.array,t.length),o]},Object(t,e,r,n){const o="Object"!==e,i=o?t.keys():Object.keys(t),a=o?t.size:i.length;if(!a)return!0===r.addBreakTokens?[ks.emptyMap,new ua(sa.break)]:ks.emptyMap;n=ws.createCheck(n,t);const s=[];let u=0;for(const e of i)s[u++]=[xs(e,r,n),xs(o?t.get(e):t[e],r,n)];return function(t,e){e.mapSorter&&t.sort(e.mapSorter)}(s,r),r.addBreakTokens?[new ua(sa.map,a),s,new ua(sa.break)]:[new ua(sa.map,a),s]}};Es.Map=Es.Object,Es.Buffer=Es.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Es[`${t}Array`]=Es.DataView;function xs(t,e={},r){const n=aa(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||Es[n];if("function"==typeof o){const i=o(t,n,e,r);if(null!=i)return i}const i=Es[n];if(!i)throw new Error(`${Sa} unsupported type: ${n}`);return i(t,n,e,r)}function _s(t,e,r,n){if(Array.isArray(e))for(const o of e)_s(t,o,r,n);else r[e.type.major](t,e,n)}function Ss(t,e,r){const n=xs(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const t=r.quickEncodeToken(n);if(t)return t;const o=e[n.type.major];if(o.encodedSize){const t=o.encodedSize(n,r),e=new xa(t);if(o(e,n,r),1!==e.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return pa(e.chunks[0])}}return ms.reset(),_s(ms,n,e,r),ms.toBytes(!0)}Symbol.for("DONE"),Symbol.for("BREAK");const Ls={float64:!0,typeEncoders:{Object:function(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=Gt.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new ua(sa.tag,42),new ua(sa.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};const Os={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Os.tags[42]=function(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Gt.decode(t.subarray(1))};Os.tags.slice();const As=t=>{return e=t,r=Ls,r=Object.assign({},vs,r),Ss(e,bs,r);var e,r};class Is extends TransformStream{constructor(t=[]){super({start:e=>e.enqueue(function(t){const e=As({version:1,roots:t}),r=na.encode(e.length),n=new Uint8Array(r.length+e.length);return n.set(r,0),n.set(e,r.length),n}(t)),transform:(t,e)=>{e.enqueue(function(t){const e=na.encode(t.cid.bytes.length+t.bytes.length),r=new Uint8Array(e.length+t.cid.bytes.length+t.bytes.length);return r.set(e),r.set(t.cid.bytes,e.length),r.set(t.bytes,e.length+t.cid.bytes.length),r}(t)),this.finalBlock=t}}),this.finalBlock=null}}function Ts(t){return Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(t)}function Rs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function js(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rs(Object(r),!0).forEach((function(e){Ds(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ds(t,e,r){return(e=Cs(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ps(){Ps=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:L(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",g={};function v(){}function b(){}function m(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(R([])));E&&E!==r&&n.call(E,a)&&(w=E);var x=m.prototype=v.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Ts(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=O(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ts(e)+" is not iterable")}return b.prototype=m,o(x,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:b,configurable:!0}),b.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},_(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),c(x,u,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function Ns(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function zs(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ns(i,n,o,a,s,"next",t)}function s(t){Ns(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Fs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cs(n.key),n)}}function Cs(t){var e=function(t,e){if("object"!=Ts(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ts(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ts(e)?e:e+""}var Us=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.httpService=e,this.report=new M(this.httpService),this.abortController=null},e=[{key:"uploadFile",value:(a=zs(Ps().mark((function t(e,r,n,o,i){var a,s,u,l;return Ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.httpService.uploadFile(e,r,n,o,i);case 3:if(0===(a=t.sent).code){t.next=6;break}return t.abrupt("return",c({code:a.code,msg:"Failed to upload file: "+a.msg,data:null!==(s=a.data)&&void 0!==s?s:{}}));case 6:return t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",c({code:t.t0.code,msg:null!==(u="Failed to upload file: "+t.t0.msg)&&void 0!==u?u:"",data:null!==(l=t.t0.data)&&void 0!==l?l:{}}));case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(t,e,r,n,o){return a.apply(this,arguments)})},{key:"handleFolderUpload",value:(i=zs(Ps().mark((function t(e,r,n,o){var i,a,u,l,f,h,p,d,y,g,v,b,m,w,k,E,x,_,S,L,O,A,I=this;return Ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.areaId,a=void 0===i?[]:i,u=r.groupId,l=void 0===u?0:u,f=r.extraId,h=void 0===f?"":f,p=r.retryCount,d=void 0===p?3:p,y=[],Date.now(),t.prev=4,t.next=7,this.createDirectoryStream(e,o);case 7:if(0===(b=t.sent).code){t.next=10;break}return t.abrupt("return",b);case 10:return m=e[0].webkitRelativePath.split("/")[0],w={asset_name:m,asset_type:"folder",asset_size:b.data.blob.size,group_id:l,asset_cid:b.data.rootCid,extra_id:h,need_trace:!0},k=-1===l,E={},E=js(js({},w),{},k?{area_ids:a}:{area_id:a}),t.next=17,this.httpService.postFileUpload({isLoggedIn:!k,areaIds:a,assetData:E});case 17:if(x=t.sent,_=function(){var t=zs(Ps().mark((function t(r,n,o){var i,a,s,u,c,l,f,h,p,d;return Ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=new URL(r.CandidateAddr),u=s.hostname.split(".")[0],c=Date.now(),t.next=5,I.uploadFile(r.CandidateAddr,r.Token,n,I.abortController.signal,(function(t,e,r){o&&o(t,e,r)}));case 5:return l=t.sent,f=null!==(i=r.TraceID)&&void 0!==i?i:"",h=Date.now(),p=h-c,d=Math.floor(e.size/p*1e3),y.push(js({status:0===l.code?1:2,msg:l.msg,elapsedTime:p,transferRate:d,size:n.size,traceId:f,nodeId:u,cId:null!==(a=l.cid)&&void 0!==a?a:"",log:0===l.code?"":Ds({},u,l.msg)},l)),t.abrupt("return",l);case 12:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),console.log(111,x.data),!(x.data.err&&1017===x.data.err||0==x.data.code&&0==(null!==(g=x.data.List)&&void 0!==g?g:[]).length)){t.next=22;break}return t.abrupt("return",c({code:0,data:{cid:b.data.rootCid,isAlreadyExist:!0,url:x.data.assetDirectUrl}}));case 22:if(0===x.code){t.next=24;break}return t.abrupt("return",x);case 24:return S=null!==(v=x.data.List)&&void 0!==v?v:[],t.next=27,this.uploadWithRetry(S,_,d,b.data.blob,n);case 27:if(L=t.sent,this.report.creatReportData(y,"upload"),0!==L.code){t.next=33;break}return t.abrupt("return",js(js({},L),{},{cid:b.data.rootCid}));case 33:return t.abrupt("return",{code:-1,msg:null!==(O=L.msg)&&void 0!==O?O:"Upload addresses failed.",data:null!==(A=L.data)&&void 0!==A?A:{}});case 34:t.next=39;break;case 36:return t.prev=36,t.t0=t.catch(4),t.abrupt("return",c({code:s.FAILURE,msg:t.t0}));case 39:case"end":return t.stop()}}),t,this,[[4,36]])}))),function(t,e,r,n){return i.apply(this,arguments)})},{key:"createDirectoryStream",value:(o=zs(Ps().mark((function t(e,r){var n,o=this;return Ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.abortController=new AbortController,t.prev=1,t.abrupt("return",new Promise((function(t,n){var i,a;ra(e).pipeThrough(new TransformStream({transform:function(t,e){a=t.cid,e.enqueue(t)}}),{signal:o.abortController.signal}).pipeThrough(new Is,{signal:o.abortController.signal}).pipeTo(new WritableStream({write:function(t){if(i){if(!i||!t)throw new Error("myFile or chunk is undefined");var e=new Uint8Array(i.length+t.length);e.set(i),e.set(t,i.length),i=e}else i=t;r&&r("writing")},close:function(){r&&r("close"),t(c({code:0,data:{blob:new Blob([i]),rootCid:a.toString()}}))},abort:function(t){r&&r("abort"),n(c({code:s.UPLOAD_FILE_ERROR,msg:t||"Stream aborted"}))}}),{signal:o.abortController.signal}).catch((function(t){n(c({code:s.UPLOAD_FILE_ERROR,msg:t.message||"Unknown error during upload"}))}))})));case 5:return t.prev=5,t.t0=t.catch(1),t.abrupt("return",c({code:t.t0.code,msg:null!==(n="Failed to upload file: "+t.t0.msg)&&void 0!==n?n:""}));case 8:case"end":return t.stop()}}),t,this,[[1,5]])}))),function(t,e){return o.apply(this,arguments)})},{key:"uploadWithRetry",value:(n=zs(Ps().mark((function t(e,r,n,o,i){var a;return Ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){var t=zs(Ps().mark((function t(c){var l,f,h;return Ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c>=e.length)){t.next=2;break}return t.abrupt("return",{code:s.UPLOAD_FILE_ERROR,msg:"All upload addresses failed."});case 2:l=Ps().mark((function t(a){var s;return Ps().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u("Processing address ".concat(c+1,"/").concat(e.length,", attempt ").concat(a+1,"/").concat(n)),t.prev=1,t.next=4,r(e[c],o,i);case 4:if(u("uploadWithRetry",s=t.sent),0!==s.code&&-200!=s.code){t.next=8;break}return t.abrupt("return",{v:s});case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,new Promise((function(t){return setTimeout(t,1e3*Math.pow(2,a))}));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})),h=0;case 4:if(!(h<n)){t.next=12;break}return t.delegateYield(l(h),"t0",6);case 6:if(!(f=t.t0)){t.next=9;break}return t.abrupt("return",f.v);case 9:h++,t.next=4;break;case 12:return t.abrupt("return",a(c+1));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.abrupt("return",a(0));case 2:case"end":return t.stop()}}),t)}))),function(t,e,r,o,i){return n.apply(this,arguments)})},{key:"delayRetry",value:function(t){return new Promise((function(e){return setTimeout(e,1e3*Math.pow(2,t))}))}},{key:"handleUploadError",value:function(){return{code:s.UPLOAD_FILE_ERROR,msg:"Upload addresses failed."}}},{key:"cancelUpload",value:function(){this.abortController&&(this.abortController.abort("Upload cancelled by user"),this.abortController=null)}}],e&&Fs(t.prototype,e),r&&Fs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i,a}();const Bs=Us;function Ms(t){return Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ms(t)}function Gs(){Gs=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:L(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",g={};function v(){}function b(){}function m(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(R([])));E&&E!==r&&n.call(E,a)&&(w=E);var x=m.prototype=v.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Ms(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=O(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ms(e)+" is not iterable")}return b.prototype=m,o(x,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:b,configurable:!0}),b.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},_(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),c(x,u,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function Hs(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function $s(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Hs(i,n,o,a,s,"next",t)}function s(t){Hs(i,n,o,a,s,"throw",t)}a(void 0)}))}}function qs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vs(n.key),n)}}function Vs(t){var e=function(t,e){if("object"!=Ms(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ms(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ms(e)?e:e+""}var Ys=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.concurrentLimit=3,this.progressCallback=null,this.chunkQueue=[],this.downloadedChunks=[],this.maxRetries=3,this.failedChunks=[],this.report=new M(e),this.mimeType="application/octet-stream"},e=[{key:"downloadFiles",value:(o=$s(Gs().mark((function t(e,r,n,o,i){return Gs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="blob",s.onprogress=function(t){var e=t.loaded/o*100;e>100&&(e=100),i(r,e)},s.onload=function(){if(200===s.status){var e=document.createElement("a"),n=window.URL.createObjectURL(s.response);e.href=n,e.download=r,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(n),document.body.removeChild(e),t({code:0,msg:"Download successful"})}else a({code:-1,msg:"Download failed"+s.statusText})},s.onerror=function(){a({code:-1,msg:"Download onerror"})},n.signal.addEventListener("abort",(function(){s.abort(),a({code:-1,msg:"Download abort"})})),s.send()})));case 1:case"end":return t.stop()}}),t)}))),function(t,e,r,n,i){return o.apply(this,arguments)})},{key:"downloadFromMultipleUrls",value:(n=$s(Gs().mark((function t(e,r,n,o,i,a){var s,u,l,f,h,p,d=this;return Gs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=new AbortController,u=!1,l=[],f=function(t,e){u||a&&a(e.toFixed(2))},h=function(){var t=$s(Gs().mark((function t(a){var c,p,y,g,v,b,m,w,k;return Gs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a>=e.length)){t.next=2;break}return t.abrupt("return",{code:-1,msg:"All url download failed"});case 2:c=Date.now(),p=e[a],y=new URL(p),g=y.hostname.split(".")[0],v=0;case 7:if(!(v<3)||u){t.next=28;break}return v++,t.prev=9,t.next=12,d.downloadFiles(p+"&format=tar",o+".tar",s,i,f);case 12:return b=t.sent,u=!0,s.abort(),m=Date.now(),w=m-c,k=Math.floor(i/w*1e3),l.push({status:1,msg:"successful",elapsedTime:w,transferRate:k,size:i,traceId:r,nodeId:g,cId:n,log:""}),d.report.creatReportData(l,"download"),t.abrupt("return",Promise.resolve(b));case 23:t.prev=23,t.t0=t.catch(9),v>=3&&(l.push({status:2,msg:"failed",elapsedTime:0,transferRate:0,size:i,traceId:r,nodeId:g,cId:n,log:(E={},x=g,_=t.t0.message,(x=Vs(x))in E?Object.defineProperty(E,x,{value:_,enumerable:!0,configurable:!0,writable:!0}):E[x]=_,E)}),d.report.creatReportData(l,"download"));case 26:t.next=7;break;case 28:return t.abrupt("return",h(a+1));case 29:case"end":return t.stop()}var E,x,_}),t,null,[[9,23]])})));return function(e){return t.apply(this,arguments)}}(),t.next=7,h(0);case 7:return p=t.sent,t.abrupt("return",u?p:c({code:-1,msg:"All url download failed "}));case 9:case"end":return t.stop()}}),t)}))),function(t,e,r,o,i,a){return n.apply(this,arguments)})}],e&&qs(t.prototype,e),r&&qs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();const Ws=Ys;function Ks(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||Qs(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Js(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Qs(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Qs(t,e){if(t){if("string"==typeof t)return Zs(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zs(t,e):void 0}}function Zs(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Xs(t){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(t)}function tu(){tu=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:L(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",g={};function v(){}function b(){}function m(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(R([])));E&&E!==r&&n.call(E,a)&&(w=E);var x=m.prototype=v.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Xs(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=O(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Xs(e)+" is not iterable")}return b.prototype=m,o(x,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:b,configurable:!0}),b.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},_(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),c(x,u,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function eu(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function ru(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){eu(i,n,o,a,s,"next",t)}function s(t){eu(i,n,o,a,s,"throw",t)}a(void 0)}))}}function nu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ou(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,au(n.key),n)}}function iu(t,e,r){return e&&ou(t.prototype,e),r&&ou(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function au(t){var e=function(t,e){if("object"!=Xs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xs(e)?e:e+""}var su=function(){return iu((function t(){nu(this,t),this._locked=!1,this._waiting=[]}),[{key:"acquire",value:(t=ru(tu().mark((function t(){var e=this;return tu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._locked){t.next=5;break}return t.next=3,new Promise((function(t){return e._waiting.push(t)}));case 3:t.next=0;break;case 5:this._locked=!0;case 6:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"release",value:function(){(this._locked=!1,this._waiting.length>0)&&this._waiting.shift()()}}]);var t}(),uu=function(){return iu((function t(e,r){nu(this,t),this.urls=e,this.chunkSize=r,this.chunkQueue=[],this.failedChunks=[],this.completedChunks=[],this.totalSize=0,this.downloadedSize=0,this.urlStatus={};var n,o=Js(this.urls);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=this.getNodeId(i);this.urlStatus[a]={code:0,msg:""}}}catch(t){o.e(t)}finally{o.f()}}),[{key:"initializeChunks",value:function(t){this.totalSize=t;for(var e=Math.ceil(t/this.chunkSize),r=0;r<e;r++){var n=r*this.chunkSize,o=Math.min(t-1,(r+1)*this.chunkSize-1);this.chunkQueue.push({start:n,end:o})}u("totalChunks: ".concat(e))}},{key:"updateDownloadedSize",value:function(t){this.downloadedSize+=t}},{key:"getProgress",value:function(){return Math.floor(this.downloadedSize/this.totalSize*100)}},{key:"getNextChunk",value:function(){return this.chunkQueue.shift()}},{key:"markChunkFailed",value:function(t,e,r){var n=this.getNodeId(e);this.failedChunks.push(t),this.urlStatus[n].code=2,this.urlStatus[n].msg="".concat(r)}},{key:"markChunkCompleted",value:function(t,e){var r=this.getNodeId(e);this.completedChunks.push(t),this.urlStatus[r].code=1,this.urlStatus[r].msg="completed"}},{key:"hasFailedChunks",value:function(){return this.failedChunks.length>0}},{key:"allChunksCompleted",value:function(){return this.completedChunks.length===Math.ceil(this.totalSize/this.chunkSize)}},{key:"getUrlStatus",value:function(){var t=this;return Object.keys(this.urlStatus).map((function(e){return{nodeId:e,code:t.urlStatus[e].code,msg:t.urlStatus[e].msg}}))}},{key:"getNodeId",value:function(t){return new URL(t).hostname.split(".")[0]}}])}(),cu=function(){return iu((function t(e){nu(this,t),this.maxConcurrentDownloads=10,this.maxRetries=0,this.report=new M(e),this.lock=new su,this.progressCallback=null,this.urlStats={},this.mimeType="application/octet-stream",this.hasSuccessfulUrl=!0}),[{key:"calculateSystemLoad",value:function(){return Math.floor(100*Math.random())}},{key:"adjustConcurrency",value:function(){var t=this.calculateSystemLoad();t>80&&this.maxConcurrentDownloads>1?this.maxConcurrentDownloads-=1:t<50&&this.maxConcurrentDownloads<20&&(this.maxConcurrentDownloads+=1)}},{key:"setProgressCallback",value:function(t){this.progressCallback=t}},{key:"initializeUrlStats",value:function(t){var e=this;t.forEach((function(t){e.urlStats[t]={success:0,failure:0}}))}},{key:"checkUrlAvailability",value:(n=ru(tu().mark((function t(e){var r;return tu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{method:"HEAD"});case 3:return r=t.sent,t.abrupt("return",r.ok);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),function(t){return n.apply(this,arguments)})},{key:"getBestUrl",value:function(){for(var t=null,e=-1,r=0,n=Object.entries(this.urlStats);r<n.length;r++){var o=Ks(n[r],2),i=o[0],a=o[1],s=a.success,u=s+a.failure,c=0===u?0:s/u;c>e&&(e=c,t=i)}return t}},{key:"downloadTask",value:(r=ru(tu().mark((function t(e,r,n){var o,i,a,s,c;return tu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u("Start downloading chunk: ".concat(r.start,"-").concat(r.end," from ").concat(e)),t.next=4,this.downloadChunk(e,r.start,r.end);case 4:if(o=t.sent,i=o.blob,a=o.size,i){t.next=11;break}throw this.urlStats[e].failure++,s="Chunk ".concat(r.start,"-").concat(r.end," failed to download."),new Error(s);case 11:n.markChunkCompleted({start:r.start,blob:i},e),n.updateDownloadedSize(a),u("Chunk downloaded successfully: ".concat(r.start,"-").concat(r.end,", size: ").concat(a)),this.urlStats[e].success++,this.progressCallback&&(c=n.getProgress(),this.progressCallback(c)),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(0),u("Failed to downloadTask chunk: ".concat(r.start,"-").concat(r.end," from ").concat(e),t.t0),n.markChunkFailed(r,e,t.t0),this.urlStats[e].failure++;case 23:case"end":return t.stop()}}),t,this,[[0,18]])}))),function(t,e,n){return r.apply(this,arguments)})},{key:"downloadChunk",value:(e=ru(tu().mark((function t(e,r,n){var o,i;return tu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,u("Requesting to download chunk: ".concat(r,"-").concat(n," from ").concat(e)),t.next=5,fetch(e,{headers:{Range:"bytes=".concat(r,"-").concat(n)}});case 5:if((o=t.sent).ok){t.next=8;break}throw new Error("Failed to download range ".concat(r,"-").concat(n));case 8:return t.next=10,o.blob();case 10:return i=t.sent,this.mimeType=o.headers.get("Content-Type"),t.abrupt("return",{blob:i,size:n-r+1});case 15:if(t.prev=15,t.t0=t.catch(1),u("Failed to download chunk: ".concat(r,"-").concat(n,", retry")),!Object.values(this.urlStats).some((function(t){return t.success>0}))){t.next=23;break}throw new Error("Failed to download range ".concat(r,"-").concat(n));case 23:return t.abrupt("return",{blob:null,size:0,error:"Failed: ".concat(r,"-").concat(n,": ").concat(t.t0.message)});case 24:case"end":return t.stop()}}),t,this,[[1,15]])}))),function(t,r,n){return e.apply(this,arguments)})},{key:"downloadFile",value:(t=ru(tu().mark((function t(e,r,n,o,i){var a,s,l,f,h,p,d,y,g,v,b,m,w,k,E,x,_,S,L,O,A,I,T;return tu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.initializeUrlStats(e),a=Math.min(1048576,Math.ceil(i/(5*e.length))),(s=new uu(e,a)).initializeChunks(i),l=[],f=[],h=Js(e),t.prev=7,h.s();case 9:if((p=h.n()).done){t.next=17;break}return d=p.value,t.next=13,this.checkUrlAvailability(d);case 13:t.sent&&l.push(d);case 15:t.next=9;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),h.e(t.t0);case 22:return t.prev=22,h.f(),t.finish(22);case 25:if(0!==l.length){t.next=27;break}return t.abrupt("return",c({code:-1,msg:"URL downloaded error "}));case 27:y=!1,g=[],v=l.slice(),b=Date.now(),this.adjustConcurrency();case 32:if(y){t.next=81;break}for(;s.chunkQueue.length>0&&g.length<this.maxConcurrentDownloads;)m=s.getNextChunk(),w=v[Math.floor(Math.random()*v.length)],g.push(this.downloadTask(w,m,s));return t.prev=34,t.next=37,Promise.all(g);case 37:t.sent,t.next=45;break;case 40:return t.prev=40,t.t1=t.catch(34),u("All download tasks failed. Exiting."),s.failedChunks=[],t.abrupt("break",81);case 45:if(!s.hasFailedChunks()){t.next=77;break}k=Js(s.failedChunks),t.prev=47,k.s();case 49:if((E=k.n()).done){t.next=68;break}if(x=E.value,_=this.getBestUrl()){t.next=54;break}return t.abrupt("return",c({code:-1,msg:"All available URLs failed to download ".concat(x.start,"-").concat(x.end,"  cannot be retried")}));case 54:return t.prev=54,t.next=57,this.downloadChunk(_,x.start,x.end);case 57:S=t.sent,L=S.blob,s.markChunkCompleted({start:x.start,blob:L},_),t.next=66;break;case 62:return t.prev=62,t.t2=t.catch(54),u("Failed to re-download chunk ".concat(x.start,"-").concat(x.end),t.t2),t.abrupt("break",68);case 66:t.next=49;break;case 68:t.next=73;break;case 70:t.prev=70,t.t3=t.catch(47),k.e(t.t3);case 73:return t.prev=73,k.f(),t.finish(73);case 76:s.failedChunks=[];case 77:y=s.allChunksCompleted(),g.length=0,t.next=32;break;case 81:if(O=Date.now(),A=O-b,I=Math.floor(i/A*1e3),(T=this.mergeChunks(s.completedChunks,this.mimeType)).size===i){t.next=91;break}return s.getUrlStatus().forEach((function(t){var e,o,a;f.push({status:2,msg:"failed",elapsedTime:0,transferRate:0,size:i,traceId:r,nodeId:t.nodeId,cId:n,log:(e={},o=t.nodeId,a=t.msg,(o=au(o))in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e)})})),this.report.creatReportData(f,"download"),t.abrupt("return",c({code:-1,msg:"Failed to download chunk"}));case 91:return s.getUrlStatus().forEach((function(t){f.push({status:1,msg:"successful",elapsedTime:A,transferRate:I,size:i,traceId:r,nodeId:t.nodeId,cId:n,log:""})})),this.saveFile(T,o),this.report.creatReportData(f,"download"),t.abrupt("return",c({code:0,msg:"File downloaded successfully "}));case 95:case"end":return t.stop()}}),t,this,[[7,19,22,25],[34,40],[47,70,73,76],[54,62]])}))),function(e,r,n,o,i){return t.apply(this,arguments)})},{key:"mergeChunks",value:function(t,e){var r=t.sort((function(t,e){return t.start-e.start}));return new Blob(r.map((function(t){return t.blob})),{type:e})}},{key:"saveFile",value:function(t,e){var r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}}]);var t,e,r,n}();const lu=cu;function fu(){fu=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:L(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",g={};function v(){}function b(){}function m(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(R([])));E&&E!==r&&n.call(E,a)&&(w=E);var x=m.prototype=v.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==hu(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=O(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(hu(e)+" is not iterable")}return b.prototype=m,o(x,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:b,configurable:!0}),b.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},_(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),c(x,u,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function hu(t){return hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(t)}function pu(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function du(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){pu(i,n,o,a,s,"next",t)}function s(t){pu(i,n,o,a,s,"throw",t)}a(void 0)}))}}function yu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gu(n.key),n)}}function gu(t){var e=function(t,e){if("object"!=hu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hu(e)?e:e+""}var vu=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.httpService=e},e=[{key:"onShare",value:(i=du(fu().mark((function t(){var e,r,n,o,i,a,u,l,f,h,p,d,y,g,v,b,m,w,k,E,x=arguments;return fu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=x.length>0&&void 0!==x[0]?x[0]:{id:null,expireAt:null,shortPass:"",hasDay:!1,hasDomain:!0},t.prev=1,"object"===hu(e)&&null!==e){t.next=4;break}return t.abrupt("return",c({code:s.ASSET_OBJ_ERROR}));case 4:if(r=e.id,n=e.expireAt,o=e.shortPass,i=e.hasDay,a=e.hasDomain,u=void 0===a||a,r){t.next=7;break}return t.abrupt("return",c({code:s.ID_KEY_EMPTY}));case 7:return l=/^\d+$/.test(r),f=l?{groupId:r}:{cId:r},t.next=11,this.httpService.getAssetGroupInfo(f);case 11:if((h=t.sent)&&0===h.code&&h.data){t.next=14;break}return t.abrupt("return",c({code:s.REQUEST_ERROR}));case 14:if(!l){t.next=24;break}if(b=h.data.data.Group){t.next=18;break}return t.abrupt("return",c({code:s.REQUEST_ERROR}));case 18:p=b.ShareStatus,d=b.UserID,y=b.ID,g="folder",t.next=32;break;case 24:if((m=h.data.data.AssetOverview)&&m.UserAssetDetail&&m.AssetRecord){t.next=27;break}return t.abrupt("return",c({code:s.REQUEST_ERROR,msg:"AssetOverview data is incomplete."}));case 27:p=m.UserAssetDetail.ShareStatus,d=m.UserAssetDetail.UserID,y=m.AssetRecord.CID,g=m.UserAssetDetail.AssetType,v=m.UserAssetDetail.area_ids;case 32:if(0!==p){t.next=40;break}return w={isNumeric:l,UserID:d,Cid:y,AssetType:g,expireAt:n,shortPass:o,area_ids:v,hasDay:i,hasDomain:u},t.next=36,this.onCreateShareLink(w);case 36:return k=t.sent,t.abrupt("return",k);case 40:return t.next=42,this.onUpdateShareLink(d,y,n,o,i,u);case 42:return E=t.sent,t.abrupt("return",E);case 44:t.next=49;break;case 46:return t.prev=46,t.t0=t.catch(1),t.abrupt("return",c({code:s.FAILURE,msg:t.t0}));case 49:case"end":return t.stop()}}),t,this,[[1,46]])}))),function(){return i.apply(this,arguments)})},{key:"onCreateShareLink",value:(o=du(fu().mark((function t(e){var r,n,o,i,a,u,l,f,h,p,d,y,g,v,b,m,k,E,x,_,S,L;return fu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.isNumeric,n=e.UserID,o=e.Cid,i=e.AssetType,a=e.expireAt,u=e.shortPass,l=e.area_ids,f=e.hasDay,h=e.hasDomain,t.prev=1,p=JSON.parse(localStorage.getItem("titanOptions")),d="https://storage.titannet.io",p.url&&(d=p.url),y=r?"/groupPreview":"/distributionstatus",g="".concat(d).concat(y,"?cid=").concat(o,"&AssetType=").concat(i,"&address=").concat(n),l&&l.length>0&&(v="area_id=".concat(encodeURIComponent(l.join(","))),g+="&".concat(v)),b=Math.floor(new Date(4101509461e3).getTime()/1e3),!a){t.next=14;break}if(!(m=w.validateExpireAt(a))){t.next=13;break}return t.abrupt("return",m);case 13:b=f?this.getFutureTimestamp(a):a;case 14:if(k="?username=".concat(n,"&cid=").concat(o,"&url=").concat(encodeURIComponent(g),"&expire_time=").concat(b),!u){t.next=20;break}if(!(E=w.validateShortPass(u))){t.next=19;break}return t.abrupt("return",E);case 19:k+="&short_pass=".concat(u);case 20:return!r&&l&&l.length>0&&(x=l.map((function(t){return"area_id=".concat(encodeURIComponent(t))})).join("&"),k+="&".concat(x)),t.next=23,this.httpService.createLink(k);case 23:if(0!==(_=t.sent).code){t.next=33;break}return S="?user_id=".concat(n,"&cid=").concat(o),!r&&l&&l.length>0&&(L=l.map((function(t){return"area_id=".concat(encodeURIComponent(t))})).join("&"),S+="&".concat(L)),t.next=29,this.httpService.shareStatusSet(S);case 29:return _.data.url=h?"".concat(d).concat(encodeURI(_.data.url)):encodeURI(_.data.url),t.abrupt("return",c({code:_.code,msg:_.msg,data:_.data}));case 33:return t.abrupt("return",c({code:_.code,msg:_.msg,data:_.data}));case 34:t.next=39;break;case 36:return t.prev=36,t.t0=t.catch(1),t.abrupt("return",c({code:s.FAILURE,msg:t.t0}));case 39:case"end":return t.stop()}}),t,this,[[1,36]])}))),function(t){return o.apply(this,arguments)})},{key:"getFutureTimestamp",value:function(t){var e=new Date,r=new Date(e.getTime()+24*t*60*60*1e3);return Math.floor(r.getTime()/1e3)}},{key:"onUpdateShareLink",value:(n=du(fu().mark((function t(e,r,n,o,i,a){var s,u,l,f,h,p,d,y,g,v,b,m,k,E;return fu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpService.shareLinkInfo("?username=".concat(e,"&cid=").concat(r));case 2:if(s=t.sent,u=s.data.link,l=u.id,f=u.short_pass,h=u.expire_at,p=u.short_link,d=f,y=new Date(h).getTime()/1e3,!o){t.next=11;break}if(!(g=w.validateShortPass(o))){t.next=10;break}return t.abrupt("return",g);case 10:d=o;case 11:if(!n){t.next=16;break}if(!(v=w.validateExpireAt(n))){t.next=15;break}return t.abrupt("return",v);case 15:y=i?this.getFutureTimestamp(n):n;case 16:return b={id:l,expire_at:y,short_pass:d},t.next=19,this.httpService.shareLinkUpdate(b);case 19:return 0==(m=t.sent).code&&(a?(k=JSON.parse(localStorage.getItem("titanOptions")),E="https://storage.titannet.io",k.url&&(E=k.url),m.data.url=E+encodeURI(p)):m.data.url=encodeURI(p)),t.abrupt("return",c({code:m.code,msg:m.msg,data:m.data}));case 22:case"end":return t.stop()}}),t,this)}))),function(t,e,r,o,i,a){return n.apply(this,arguments)})}],e&&yu(t.prototype,e),r&&yu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i}();const bu=vu;function mu(t){return mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(t)}function wu(){wu=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:L(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",g={};function v(){}function b(){}function m(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(R([])));E&&E!==r&&n.call(E,a)&&(w=E);var x=m.prototype=v.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==mu(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=O(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(mu(e)+" is not iterable")}return b.prototype=m,o(x,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:b,configurable:!0}),b.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},_(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),c(x,u,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function ku(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Eu(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ku(i,n,o,a,s,"next",t)}function s(t){ku(i,n,o,a,s,"throw",t)}a(void 0)}))}}function xu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_u(n.key),n)}}function _u(t){var e=function(t,e){if("object"!=mu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mu(e)?e:e+""}var Su=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Http=e,this.httpService=new R(e)},e=[{key:"updateToken",value:function(t){return"string"==typeof t&&t.trim().length>0?this.Http.updateToken(t):c({code:s.BAD_REQUEST,msg:"Invalid API token provided."})}},{key:"updateLanguage",value:(b=Eu(wu().mark((function t(e){var r;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this.Http.updateLanguage(e),t.abrupt("return",r);case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",c({code:s.FAILURE,msg:t.t0}));case 8:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(t){return b.apply(this,arguments)})},{key:"onAreaId",value:(v=Eu(wu().mark((function t(){return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.httpService.getAreaIdList();case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",c({code:s.INTERNAL_SERVER_ERROR,msg:"Failed to get area ID: "+t.t0}));case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(){return v.apply(this,arguments)})},{key:"onCreateGroup",value:(g=Eu(wu().mark((function t(e,r){var n,o;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=w.validateGroupName(e))){t.next=5;break}return u(n),t.abrupt("return",n);case 5:if(!(o=w.validateParentId(r))){t.next=9;break}return u(o),t.abrupt("return",n);case 9:return t.next=11,this.httpService.createGroup(e,r);case 11:return t.abrupt("return",t.sent);case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",c({code:s.INTERNAL_SERVER_ERROR,msg:"Failed to create group: "+t.t0}));case 17:case"end":return t.stop()}}),t,this,[[0,14]])}))),function(t,e){return g.apply(this,arguments)})},{key:"onAssetGroupList",value:(y=Eu(wu().mark((function t(e,r,n){var o,i,a;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(o=w.validateParentId(r))){t.next=5;break}return u(o),t.abrupt("return",o);case 5:if(!(i=w.validatePage(e))){t.next=9;break}return u(i),t.abrupt("return",i);case 9:if(!(a=w.validatePageSize(n))){t.next=13;break}return u(a),t.abrupt("return",a);case 13:return t.next=15,this.httpService.onAssetGroupList(e,r,n);case 15:return t.abrupt("return",t.sent);case 18:return t.prev=18,t.t0=t.catch(0),t.abrupt("return",c({code:s.INTERNAL_SERVER_ERROR,msg:"Failed to asset list: "+t.t0}));case 21:case"end":return t.stop()}}),t,this,[[0,18]])}))),function(t,e,r){return y.apply(this,arguments)})},{key:"renameGroup",value:(d=Eu(wu().mark((function t(){var e,r,n,o=arguments;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:{groupId:-1,name:""},t.prev=1,!(r=w.validateGroupName(e.name))){t.next=6;break}return u(r),t.abrupt("return",r);case 6:if(!(n=w.validateGroupId(e.groupId))){t.next=9;break}return t.abrupt("return",n);case 9:return t.next=11,this.httpService.renameGroup(e);case 11:return t.abrupt("return",t.sent);case 14:return t.prev=14,t.t0=t.catch(1),t.abrupt("return",c({code:s.INTERNAL_SERVER_ERROR,msg:"Failed to rename group: "+t.t0}));case 17:case"end":return t.stop()}}),t,this,[[1,14]])}))),function(){return d.apply(this,arguments)})},{key:"renameAsset",value:(p=Eu(wu().mark((function t(){var e,r,n,o=arguments;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:{assetId:-1,name:""},t.prev=1,!(r=w.validateGroupName(e.name))){t.next=6;break}return u(r),t.abrupt("return",r);case 6:if(!(n=w.validateAssetCid(e.assetId))){t.next=9;break}return t.abrupt("return",n);case 9:return t.next=11,this.httpService.renameAsset(e);case 11:return t.abrupt("return",t.sent);case 14:return t.prev=14,t.t0=t.catch(1),t.abrupt("return",c({code:s.INTERNAL_SERVER_ERROR,msg:"Failed to rename asset: "+t.t0}));case 17:case"end":return t.stop()}}),t,this,[[1,14]])}))),function(){return p.apply(this,arguments)})},{key:"deleteGroup",value:(h=Eu(wu().mark((function t(){var e,r,n=arguments;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:{groupId:-1},t.prev=1,!(r=w.validateGroupId(e.groupId))){t.next=5;break}return t.abrupt("return",r);case 5:return t.next=7,this.httpService.deleteGroup(e);case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",c({code:s.INTERNAL_SERVER_ERROR,msg:"Failed to delete group: "+t.t0}));case 13:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(){return h.apply(this,arguments)})},{key:"deleteAsset",value:(f=Eu(wu().mark((function t(){var e,r=arguments;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{assetId:-1,areaId:[]},t.prev=1,-1!==e.assetId){t.next=4;break}return t.abrupt("return",c({code:s.ID_KEY_EMPTY,msg:"Asset ID is required"}));case 4:return t.next=6,this.httpService.deleteAsset(e);case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",c({code:s.INTERNAL_SERVER_ERROR,msg:"Failed to delete asset: "+t.t0}));case 12:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return f.apply(this,arguments)})},{key:"getAssetGroupInfo",value:(l=Eu(wu().mark((function t(){var e,r=arguments;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{cId:-1,groupId:-1},t.prev=1,-1!==e.cId||-1!==e.groupId){t.next=4;break}return t.abrupt("return",c({code:s.ID_KEY_EMPTY,msg:"At least one ID (cId or groupId) is required"}));case 4:return t.next=6,this.httpService.getAssetGroupInfo(e);case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",c({code:s.INTERNAL_SERVER_ERROR,msg:""+t.t0}));case 12:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return l.apply(this,arguments)})},{key:"userInfo",value:(a=Eu(wu().mark((function t(){return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.httpService.userInfo();case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",c({code:s.INTERNAL_SERVER_ERROR,msg:"Failed to retrieve user information: "+t.t0}));case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(){return a.apply(this,arguments)})},{key:"onShare",value:(i=Eu(wu().mark((function t(){var e,r,n=arguments;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{id:null,expireAt:null,shortPass:"",hasDay:!1,hasDomain:!0},t.prev=1,r=new bu(this.httpService),t.abrupt("return",r.onShare(e));case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",c({code:s.INTERNAL_SERVER_ERROR,msg:""+t.t0}));case 9:case"end":return t.stop()}}),t,this,[[1,6]])}))),function(){return i.apply(this,arguments)})},{key:"onFileUpload",value:(o=Eu(wu().mark((function t(e){var r,n,o,i,a,u,l=this,f=arguments;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:{areaId:[],groupId:0,assetType:0,extraId:"",retryCount:3},o=f.length>2?f[2]:void 0,i=f.length>3?f[3]:void 0,a=f.length>4?f[4]:void 0,!(u=w.validateUploadOptions(e,null!==(r=n.areaId)&&void 0!==r?r:[],n.groupId,n.assetType))){t.next=7;break}return t.abrupt("return",u);case 7:if(0!==n.assetType){t.next=15;break}return this.uploadLoader=new tt(this.httpService),a&&a((function(){return l.uploadLoader.cancelUpload()})),t.next=12,this.uploadLoader.onFileUpload(e,n,o,i);case 12:case 20:return t.abrupt("return",t.sent);case 15:if(1!==n.assetType){t.next=23;break}return this.folderLoader=new Bs(this.httpService),a&&a((function(){return l.folderLoader.cancelUpload()})),t.next=20,this.folderLoader.handleFolderUpload(e,n,o,i);case 23:return t.abrupt("return",c({code:s.Asset_Type_ERROR}));case 24:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"onFileDown",value:(n=Eu(wu().mark((function t(){var e,r,n,o,i,a,l,f,h,p,d,y,g,v,b,m,k,E,x,_,S=arguments;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=S.length>1?S[1]:void 0,n=(e=S.length>0&&void 0!==S[0]?S[0]:{areaId:"",assetCid:"",assetType:"",userId:"",hasTempFile:!1,tempFileName:"",fileSize:0}).assetCid,o=e.assetType,i=e.userId,a=e.areaId,l=e.hasTempFile,f=e.tempFileName,h=e.fileSize,!(p=w.validateAssetCid(n))){t.next=6;break}return t.abrupt("return",p);case 6:return t.next=8,this.httpService.getFileDownURL({assetCid:n,userId:i,areaId:a,hasTempFile:l});case 8:if(0!==(d=t.sent).code){t.next=37;break}if(g=function(t){var e=new URL(t);return new URLSearchParams(e.search).get("filename")},v=d.data.url,(b=g(v[0]))||(b=f),m=null!==(y=d.data.size)&&void 0!==y?y:h,k=d.data.trace_id,"folder"!=o){t.next=24;break}return E=new Ws(this.httpService),t.next=20,E.downloadFromMultipleUrls(v,k,n,b,m,r);case 20:return x=t.sent,t.abrupt("return",x);case 24:if("file"!=o){t.next=34;break}return(_=new lu(this.httpService)).setProgressCallback((function(t){r&&r(t)})),t.next=29,_.downloadFile(v,k,n,b,m);case 29:return u("downresult.file",x=t.sent),t.abrupt("return",x);case 34:return t.abrupt("return",c({code:s.Dowload_Type_ERROR,msg:"Failed to downresult: "}));case 35:t.next=38;break;case 37:return t.abrupt("return",d);case 38:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&xu(t.prototype,e),r&&xu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i,a,l,f,h,p,d,y,g,v,b}();const Lu=Su;function Ou(t){return Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(t)}function Au(){Au=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:L(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",g={};function v(){}function b(){}function m(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(R([])));E&&E!==r&&n.call(E,a)&&(w=E);var x=m.prototype=v.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Ou(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=O(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ou(e)+" is not iterable")}return b.prototype=m,o(x,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:b,configurable:!0}),b.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},_(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),c(x,u,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function Iu(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Tu(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Iu(i,n,o,a,s,"next",t)}function s(t){Iu(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Ru(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ju(n.key),n)}}function ju(t){var e=function(t,e){if("object"!=Ou(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ou(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ou(e)?e:e+""}var Du,Pu,Nu,zu=function(){function t(e){var r=e.token,n=e.url,o=e.debug,i=void 0!==o&&o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.commService=new Lu(new m(r,n,i))}return e=t,r=[{key:"updateToken",value:(E=Tu(Au().mark((function t(e){var r;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.commService.updateToken(e),t.abrupt("return",r);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return E.apply(this,arguments)})},{key:"updateLanguage",value:(k=Tu(Au().mark((function t(e){var r;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.commService.updateLanguage(e),t.abrupt("return",r);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return k.apply(this,arguments)})},{key:"listRegions",value:(b=Tu(Au().mark((function t(){var e;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.commService.onAreaId();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"createFolder",value:(v=Tu(Au().mark((function t(){var e,r,n=arguments;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{name:"",parent:0},t.next=3,this.commService.onCreateGroup(e.name,e.parent);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"listDirectoryContents",value:(g=Tu(Au().mark((function t(){var e,r,n=arguments;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{page:1,parent:0,pageSize:10},t.next=3,this.commService.onAssetGroupList(e.page,e.parent,e.pageSize);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"renameFolder",value:(y=Tu(Au().mark((function t(){var e,r,n=arguments;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{groupId:-1,name:""},t.next=3,this.commService.renameGroup(e);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"renameAsset",value:(d=Tu(Au().mark((function t(){var e,r,n=arguments;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{assetId:-1,name:""},t.next=3,this.commService.renameAsset(e);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"deleteFolder",value:(p=Tu(Au().mark((function t(){var e,r,n=arguments;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{groupId:-1},t.next=3,this.commService.deleteGroup(e);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"deleteAsset",value:(h=Tu(Au().mark((function t(){var e,r,n=arguments;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{assetId:-1,areaId:[]},t.next=3,this.commService.deleteAsset(e);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getUserProfile",value:(f=Tu(Au().mark((function t(){var e;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.commService.userInfo();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"getltemDetails",value:(l=Tu(Au().mark((function t(){var e,r,n=arguments;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{cId:-1,groupId:-1},t.next=3,this.commService.getAssetGroupInfo(e);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"createSharedLink",value:(a=Tu(Au().mark((function t(){var e,r,n=arguments;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{id:null,expireAt:null,shortPass:"",hasDay:!1,hasDomain:!0},t.next=3,this.commService.onShare(e);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"uploadAsset",value:(i=Tu(Au().mark((function t(e,r,n,o,i){var a;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.commService.onFileUpload(e,r,n,o,i);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n,o){return i.apply(this,arguments)})},{key:"downloadAsset",value:(o=Tu(Au().mark((function t(){var e,r,n,o=arguments;return Au().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:{areaId:"",assetCid:"",assetType:"",userId:"",hasTempFile:!1,tempFileName:"",fileSize:0},r=o.length>1?o[1]:void 0,t.next=4,this.commService.onFileDown(e,r);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],n=[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:"",debug:!1,url:""};try{var r=w.validateApiKey(e.token);if(r)return u(r),r;localStorage.setItem("titanOptions",JSON.stringify(e)),t.instance=new t(e);var n=c({code:s.SUCCESSFULLY});return u(n),n}catch(t){return c({code:s.InitSdk_ERROR})}}},{key:"getInstance",value:function(){if(!t.instance){var e=JSON.parse(localStorage.getItem("titanOptions")),r=w.validateApiKey(e.token);r&&u(r),t.instance=new t(e)}return t.instance}}],r&&Ru(e.prototype,r),n&&Ru(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n,o,i,a,l,f,h,p,d,y,g,v,b,k,E}();Du=zu,Nu=null,(Pu=ju(Pu="instance"))in Du?Object.defineProperty(Du,Pu,{value:Nu,enumerable:!0,configurable:!0,writable:!0}):Du[Pu]=Nu;const Fu=zu})(),module.exports=__webpack_exports__})();